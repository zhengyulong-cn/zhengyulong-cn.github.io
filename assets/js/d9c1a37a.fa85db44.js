"use strict";(self.webpackChunkprivate_long_blog=self.webpackChunkprivate_long_blog||[]).push([[6485],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>d});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},m=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},k="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),k=p(t),c=l,d=k["".concat(s,".").concat(c)]||k[c]||u[c]||r;return t?a.createElement(d,i(i({ref:n},m),{},{components:t})):a.createElement(d,i({ref:n},m))}));function d(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=c;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[k]="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},6857:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=t(7462),l=(t(7294),t(3905));const r={},i="\u4e00\u3001Node\u57fa\u7840",o={unversionedId:"frontend-programing-skills/Node\u4ece\u5165\u95e8\u5230\u7cbe\u901a/Node\u5165\u95e8",id:"frontend-programing-skills/Node\u4ece\u5165\u95e8\u5230\u7cbe\u901a/Node\u5165\u95e8",title:"\u4e00\u3001Node\u57fa\u7840",description:"Node.js\u662f\u4ec0\u4e48",source:"@site/docs/frontend-programing-skills/Node\u4ece\u5165\u95e8\u5230\u7cbe\u901a/Node\u5165\u95e8.md",sourceDirName:"frontend-programing-skills/Node\u4ece\u5165\u95e8\u5230\u7cbe\u901a",slug:"/frontend-programing-skills/Node\u4ece\u5165\u95e8\u5230\u7cbe\u901a/Node\u5165\u95e8",permalink:"/docs/frontend-programing-skills/Node\u4ece\u5165\u95e8\u5230\u7cbe\u901a/Node\u5165\u95e8",draft:!1,tags:[],version:"current",lastUpdatedAt:1693315509,formattedLastUpdatedAt:"2023\u5e748\u670829\u65e5",frontMatter:{}},s={},p=[{value:"Node.js\u662f\u4ec0\u4e48",id:"nodejs\u662f\u4ec0\u4e48",level:2},{value:"\u76f8\u5173\u5de5\u5177",id:"\u76f8\u5173\u5de5\u5177",level:2},{value:"npm",id:"npm",level:3},{value:"npx",id:"npx",level:3},{value:"package.json",id:"packagejson",level:3},{value:"path",id:"path",level:2},{value:"events",id:"events",level:2},{value:"process",id:"process",level:2},{value:"url",id:"url",level:2},{value:"URL\u5bf9\u8c61",id:"url\u5bf9\u8c61",level:3},{value:"URLSearchParams",id:"urlsearchparams",level:3},{value:"zlib",id:"zlib",level:2},{value:"API\u98ce\u683c",id:"api\u98ce\u683c",level:2},{value:"\u6587\u4ef6\u8bfb\u53d6",id:"\u6587\u4ef6\u8bfb\u53d6",level:2},{value:"readFile()",id:"readfile",level:3},{value:"\u7cbe\u786e\u8bfb\u53d6",id:"\u7cbe\u786e\u8bfb\u53d6",level:3},{value:"fs.createReadStream()",id:"fscreatereadstream",level:3},{value:"\u6587\u4ef6\u5199\u5165",id:"\u6587\u4ef6\u5199\u5165",level:2},{value:"writeFile()",id:"writefile",level:3},{value:"appendFile()",id:"appendfile",level:3},{value:"\u7cbe\u786e\u5199\u5165",id:"\u7cbe\u786e\u5199\u5165",level:3},{value:"fs.createWriteStream()",id:"fscreatewritestream",level:3},{value:"\u6587\u4ef6\u5939\u64cd\u4f5c",id:"\u6587\u4ef6\u5939\u64cd\u4f5c",level:2},{value:"fs.Dir\u7c7b",id:"fsdir\u7c7b",level:3},{value:"fs.Dirent\u7c7b",id:"fsdirent\u7c7b",level:3},{value:"\u64cd\u4f5c",id:"\u64cd\u4f5c",level:3},{value:"\u76d1\u89c6",id:"\u76d1\u89c6",level:2},{value:"fs.FSWatcher\u7c7b",id:"fsfswatcher\u7c7b",level:3},{value:"fs.watch()",id:"fswatch",level:3},{value:"\u793e\u533a\u9009\u62e9",id:"\u793e\u533a\u9009\u62e9",level:3},{value:"\u5176\u4ed6\u5e38\u7528API",id:"\u5176\u4ed6\u5e38\u7528api",level:2},{value:"\u5224\u65ad\u8def\u5f84\u662f\u5426\u5b58\u5728",id:"\u5224\u65ad\u8def\u5f84\u662f\u5426\u5b58\u5728",level:3},{value:"fs.access()",id:"fsaccess",level:3},{value:"fs.copyFile()",id:"fscopyfile",level:3},{value:"fs.rename()",id:"fsrename",level:3},{value:"fs.unlink()",id:"fsunlink",level:3},{value:"fs.chmod()",id:"fschmod",level:3},{value:"\u6570\u636e\u7ed3\u6784\u5316\u5bf9\u8c61",id:"\u6570\u636e\u7ed3\u6784\u5316\u5bf9\u8c61",level:2},{value:"TypedArray",id:"typedarray",level:3},{value:"ArrayBuffer",id:"arraybuffer",level:3},{value:"DataView",id:"dataview",level:3},{value:"Buffer",id:"buffer",level:2},{value:"\u5b9e\u4f8b\u5316Buffer",id:"\u5b9e\u4f8b\u5316buffer",level:3},{value:"Buffer\u548cstring\u8f6c\u6362",id:"buffer\u548cstring\u8f6c\u6362",level:3},{value:"Buffer\u62fc\u63a5",id:"buffer\u62fc\u63a5",level:3},{value:"StringDecoder",id:"stringdecoder",level:3},{value:"Stream\u57fa\u672c\u6982\u5ff5",id:"stream\u57fa\u672c\u6982\u5ff5",level:2},{value:"\u53ef\u8bfb\u6d41",id:"\u53ef\u8bfb\u6d41",level:2},{value:"\u81ea\u5b9a\u4e49\u53ef\u8bfb\u6d41",id:"\u81ea\u5b9a\u4e49\u53ef\u8bfb\u6d41",level:3},{value:"\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f",id:"\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f",level:3},{value:"\u6d41\u52a8\u6a21\u5f0f",id:"\u6d41\u52a8\u6a21\u5f0f",level:4},{value:"\u6682\u505c\u6a21\u5f0f",id:"\u6682\u505c\u6a21\u5f0f",level:4},{value:"\u53ef\u5199\u6d41",id:"\u53ef\u5199\u6d41",level:2},{value:"\u53ef\u5199\u6d41\u7684\u4f7f\u7528",id:"\u53ef\u5199\u6d41\u7684\u4f7f\u7528",level:3},{value:"\u81ea\u5b9a\u4e49\u53ef\u5199\u6d41",id:"\u81ea\u5b9a\u4e49\u53ef\u5199\u6d41",level:3},{value:"back pressure",id:"back-pressure",level:3},{value:"\u53cc\u5de5\u6d41",id:"\u53cc\u5de5\u6d41",level:2},{value:"Duplex",id:"duplex",level:3},{value:"Transform",id:"transform",level:3},{value:"HTTP\u670d\u52a1\u5668",id:"http\u670d\u52a1\u5668",level:2},{value:"\u4f7f\u7528\u4e2d\u95f4\u4ef6\u7684\u601d\u8def\u5199\u4e00\u4e2a\u9759\u6001\u670d\u52a1\u5668",id:"\u4f7f\u7528\u4e2d\u95f4\u4ef6\u7684\u601d\u8def\u5199\u4e00\u4e2a\u9759\u6001\u670d\u52a1\u5668",level:2}],m={toc:p},k="wrapper";function u(e){let{components:n,...r}=e;return(0,l.kt)(k,(0,a.Z)({},m,r,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u4e00node\u57fa\u7840"},"\u4e00\u3001Node\u57fa\u7840"),(0,l.kt)("h2",{id:"nodejs\u662f\u4ec0\u4e48"},"Node.js\u662f\u4ec0\u4e48"),(0,l.kt)("p",null,"\u5b9a\u4e49\uff1aNode.js\xae is a JavaScript runtime built on Chrome's V8 JavaScript engine."),(0,l.kt)("p",null,"\u4ece\u5b9a\u4e49\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u51e0\u4e2a\u91cd\u8981\u7279\u5f81\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Node.js\u4e0d\u662f\u4e00\u95e8\u8bed\u8a00\uff0c\u800c\u662f\u4e00\u4e2a\u8fd0\u884c\u65f6"),(0,l.kt)("li",{parentName:"ol"},"\u8bed\u8a00\u662fJavaScript\uff0c\u4e0d\u5305\u542bBOM\u3001DOM API\uff0c\u6dfb\u52a0\u4e86Stream\u3001\u7f51\u7edc\u7b49API"),(0,l.kt)("li",{parentName:"ol"},"Node.js\u4f9d\u8d56V8\u5f15\u64ce\u8fd0\u884cJavaScript")),(0,l.kt)("p",null,"\u7531\u4e8eJavaScript\u662f\u5355\u7ebf\u7a0b\u7684\uff0cNode.js\u4f9d\u8d56\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u5b9e\u73b0\u5f02\u6b65\uff0c\u6765\u8282\u7ea6CPU\u8d44\u6e90\uff0c\u4f46",(0,l.kt)("strong",{parentName:"p"},"\u8be5\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u548c\u5728\u6d4f\u89c8\u5668\u662f\u4e0d\u540c\u7684"),"\u3002"),(0,l.kt)("h2",{id:"\u76f8\u5173\u5de5\u5177"},"\u76f8\u5173\u5de5\u5177"),(0,l.kt)("p",null,"npm \u662f Node.js \u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u901a\u8fc7npm\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u5f00\u6e90\u6a21\u5757\u3002\u7c7b\u4f3c\u8fd8\u6709yarn\u3001pmpm\u7b49\u7b49\u3002"),(0,l.kt)("h3",{id:"npm"},"npm"),(0,l.kt)("p",null,"1.\u914d\u7f6enpm"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u67e5\u770b\u5f53\u524d\u6e90\nnpm config get registry\n# \u5207\u6362\u6dd8\u5b9d\u6e90\nnpm config set registry https://registry.npm.taobao.org\n")),(0,l.kt)("p",null,"2.\u5b89\u88c5package"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5168\u5c40\u5b89\u88c5\nnpm install <package_name> -g\n# \u5728\u9879\u76ee\u4e2d\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684\u5305\nnpm install <package_name>@x.y.z\n")),(0,l.kt)("p",null,"\u5168\u5c40\u5b89\u88c5\u7684\u76ee\u5f55\u4f4d\u7f6e\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Mac\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"/Users/felix/.nvm/versions/node/nvm\u5404\u4e2a\u7248\u672c/bin/")),(0,l.kt)("li",{parentName:"ul"},"Windows\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"C:\\Users\\\u4f60\u7684\u7528\u6237\u540d\\AppData\\Roaming\\npm\\node_modules"))),(0,l.kt)("p",null,"\u672c\u5730\u5b89\u88c5\u5c31\u662f\u627e\u5230\u5bf9\u5e94\u7684\u5de5\u7a0b\u6587\u4ef6\u5939\uff0c\u4e0d\u643a\u5e26",(0,l.kt)("inlineCode",{parentName:"p"},"-g")),(0,l.kt)("p",null,"3.\u67e5\u770b\u76f8\u5173\u4fe1\u606f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u67e5\u770b\u9879\u76ee\u5b89\u88c5\u7684\u5305\nnpm list\n# \u67e5\u770b\u67d0\u4e2a\u5305\u7684\u4fe1\u606f\uff08\u4e0d\u4e00\u5b9a\u5728\u9879\u76ee\u4e2d\u5f15\u7528\u8fc7\u7684\uff09\nnpm info <package_name>\n# \u67e5\u770b\u67d0\u4e2a\u5305\u7684\u6240\u6709\u7248\u672c\u53f7\uff08\u4e0d\u4e00\u5b9a\u5728\u9879\u76ee\u4e2d\u5f15\u7528\u8fc7\u7684\uff09\nnpm view <package_name> versions\n")),(0,l.kt)("p",null,"4.\u6e05\u7406\u7f13\u5b58"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm cache clean --force\n")),(0,l.kt)("h3",{id:"npx"},"npx"),(0,l.kt)("p",null,"1.npx\u89e3\u51b3\u7684\u4e3b\u8981\u95ee\u9898\uff0c\u5c31\u662f\u8c03\u7528\u9879\u76ee\u5185\u90e8\u5b89\u88c5\u7684\u6a21\u5757\u3002"),(0,l.kt)("p",null,"\u6bd4\u5982\u6709\u6a21\u5757jest\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u60f3\u8981\u8c03\u7528\u5c31\u53ea\u80fd\u5728\u9879\u76ee\u811a\u672c\u548c package.json \u7684scripts\u5b57\u6bb5\u91cc\u9762\uff0c\u4f46\u6211\u4eec\u60f3\u73b0\u5728\u901a\u8fc7\u547d\u4ee4\u884c\u8c03\u7528\uff0c\u5219\u5fc5\u987b\u6267\u884c",(0,l.kt)("inlineCode",{parentName:"p"},"node-modules/.bin/jest--version"),"\u3002npx\u89e3\u51b3\u5c31\u662f\u8fd9\u4e2a\u95ee\u9898\uff0c\u73b0\u5728\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npx jest --version"),"\u8c03\u7528\u4e86\u3002"),(0,l.kt)("p",null,"npx\u6267\u884c\u539f\u7406\u5c31\u662f\u5728\u8fd0\u884c\u65f6\u5230",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules/.bin/*"),"\u8def\u5f84\u548c\u73af\u5883\u53d8\u91cf",(0,l.kt)("inlineCode",{parentName:"p"},"$PATH"),"\u91cc\u68c0\u6d4b\u547d\u4ee4\u662f\u5426\u5b58\u5728\u3002"),(0,l.kt)("p",null,"2.\u907f\u514d\u5168\u5c40\u5b89\u88c5\u6a21\u5757"),(0,l.kt)("p",null,"\u6267\u884c\u4e0b\u9762\u4ee3\u7801\u65f6\uff0cnpx\u4f1a\u5c06",(0,l.kt)("inlineCode",{parentName:"p"},"create-react-app"),"\u4e0b\u8f7d\u5230\u4e00\u4e2a\u4e34\u65f6\u76ee\u5f55\uff0c\u4f7f\u7528\u540e\u518d\u5220\u9664"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-react-app my-react-app\n")),(0,l.kt)("p",null,"3.\u53c2\u6570"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--no-install"),"\uff1a\u5f3a\u5236npx\u4f7f\u7528\u672c\u5730\u6a21\u5757\uff0c\u5982\u679c\u672c\u5730\u4e0d\u5b58\u5728\u5c31\u62a5\u9519\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--ignore-existing"),"\uff1a\u5ffd\u7565\u672c\u5730\u7684\u540c\u540d\u6a21\u5757\uff0c\u5f3a\u5236\u5b89\u88c5\u4f7f\u7528\u8fdc\u7a0b\u6a21\u5757")),(0,l.kt)("h3",{id:"packagejson"},"package.json"),(0,l.kt)("p",null,"npm \u901a\u8fc7 Node.js \u6a21\u5757\u6839\u76ee\u5f55\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"package.json")," \u6587\u4ef6\u83b7\u53d6\u6a21\u5757\u5143\u6570\u636e\u548c\u4f9d\u8d56\u5173\u7cfb\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'  \n{\n  "name": "react",\n  "description": "React is a JavaScript library for building user interfaces.",\n  "keywords": [\n    "react"\n  ],\n  "version": "16.13.1",\n  "homepage": "https://reactjs.org/",\n  "bugs": "https://github.com/facebook/react/issues",\n  "license": "MIT",\n  "files": [\n    "LICENSE",\n    "README.md",\n    "build-info.json",\n    "index.js",\n    "cjs/",\n    "umd/",\n    "jsx-runtime.js",\n    "jsx-dev-runtime.js"\n  ],\n  "main": "index.js",\n  "repository": {\n    "type": "git",\n    "url": "https://github.com/facebook/react.git",\n    "directory": "packages/react"\n  },\n  "engines": {\n    "node": ">=0.10.0"\n  },\n  "dependencies": {\n    "loose-envify": "^1.1.0",\n    "object-assign": "^4.1.1"\n  },\n  "browserify": {\n    "transform": [\n      "loose-envify"\n    ]\n  }\n}\n')),(0,l.kt)("p",null,"1.name\uff1a\u6a21\u5757\u552f\u4e00\u6807\u8bc6"),(0,l.kt)("p",null,"\u5b89\u88c5\u548c\u4f7f\u7528\u6a21\u5757\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install react\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const react = require('react');\n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7scope\u7ec4\u7ec7\u5177\u6709\u76f8\u5173\u6027\u7684\u6a21\u5757\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"@"),"\u5f00\u5934\u7684\u5305\u5c31\u662f\u4e00\u4e2ascoped package\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4ee5\u4e0b\u7684scope\u90fd\u662fbabel\n@babel/preset-env\n@babel/preset-react\n@babel/plugin-transform-typescript\n")),(0,l.kt)("p",null,"2.version"),(0,l.kt)("p",null,"\u9075\u4ece\u8bed\u4e49\u5316\u7248\u672c\u89c4\u8303\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"x.y.z"),"\u5f62\u5f0f\uff0c\u5bf9\u5e94",(0,l.kt)("inlineCode",{parentName:"p"},"\u4e3b\u7248\u672c.\u6b21\u7248\u672c.\u4fee\u8ba2\u7248\u672c"),"\uff0c\u9012\u589e\u89c4\u5219\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u7248\u672c\uff1a\u5f53\u4f60\u505a\u4e86\u4e0d\u517c\u5bb9\u7684 API \u4fee\u6539"),(0,l.kt)("li",{parentName:"ul"},"\u6b21\u7248\u672c\uff1a\u5f53\u4f60\u505a\u4e86\u5411\u4e0b\u517c\u5bb9\u7684\u529f\u80fd\u6027\u65b0\u589e"),(0,l.kt)("li",{parentName:"ul"},"\u4fee\u8ba2\u7248\u672c\uff1a\u5f53\u4f60\u505a\u4e86\u5411\u4e0b\u517c\u5bb9\u7684\u95ee\u9898\u4fee\u6b63")),(0,l.kt)("p",null,"\u9664\u4e86\u6b63\u5f0f\u7248\u672c\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u7a33\u5b9a\u6027\uff0c\u4f1a\u63d0\u4f9b\u5148\u884c\u7248\u672c\uff0c\u8fd9\u79cd\u7279\u6b8a\u7248\u672c\u9664\u975e\u5f00\u53d1\u8005\u7cbe\u786e\u58f0\u660e\u4f7f\u7528\uff0c\u5426\u5219 npm install \u4e0d\u4f1a\u81ea\u52a8\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u5185\u5bb9\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"alpha: \u5185\u90e8\u7248\u672c"),(0,l.kt)("li",{parentName:"ul"},"beta: \u516c\u6d4b\u7248\u672c"),(0,l.kt)("li",{parentName:"ul"},"rc: Release candidate\uff0c\u6b63\u5f0f\u7248\u672c\u7684\u5019\u9009\u7248\u672c")),(0,l.kt)("p",null,"3.dependencies & devDependencies"),(0,l.kt)("p",null,"dependencies\uff1a\u751f\u4ea7\u73af\u5883\u4e2d\u7684\u5305\uff0c\u751f\u4ea7\u548c\u5f00\u53d1\u73af\u5883\u90fd\u80fd\u7528"),(0,l.kt)("p",null,"devDependencies\uff1a\u5f00\u53d1\u73af\u5883\u4e2d\u7684\u5305\uff0c\u53ea\u6709\u5f00\u53d1\u73af\u5883\u80fd\u7528"),(0,l.kt)("p",null,"\u6a21\u5757\u4f9d\u8d56\u7248\u672c\u53f7\u6709\u51e0\u79cd\u4e0d\u540c\u5199\u6cd5\uff0c\u6765\u4fdd\u8bc1\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"x.y.z"),"\uff1a\u4f7f\u7528\u7cbe\u786e\u7248\u672c\u53f7"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"*")," \uff1a\u4efb\u610f\u7248\u672c\uff0c\u7b2c\u4e00\u6b21\u5b89\u88c5\u4f1a\u4f7f\u7528\u6a21\u5757\u6700\u65b0\u7248\u672c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"^x.y.z"),"\uff1ax \u4f4d\u9501\u6b7b\uff0cy\u3001z \u4f4d\u4f7f\u7528\u6700\u65b0\u7248\u672c",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"3.x")," \u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"^3.0.0")," \u542b\u4e49\u76f8\u540c\uff0cx \u4f4d\u4f7f\u7528\u6307\u5b9a\u7248\u672c\uff0cy\u3001z \u4f4d\u4f7f\u7528\u6700\u65b0"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"~x.y.z"),"\uff1ax\u3001y \u4f4d\u9501\u6b7b\uff0cz \u4f4d\u4f7f\u7528\u6700\u65b0\u7248\u672c")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5b89\u88c5\u5bf9\u5e94\u6a21\u5757\u5230\u751f\u4ea7\u73af\u5883\nnpm install <package_name> --save\n# \u5b89\u88c5\u5bf9\u5e94\u6a21\u5757\u5230\u5f00\u53d1\u73af\u5883\uff0c\u5e76\u6307\u660e\u7248\u672c\u53f7\u4e3a^x.y.z\nnpm install <package_name>@x --save-dev\n")),(0,l.kt)("p",null,"4.peerDependencies"),(0,l.kt)("p",null,"\u6709\u65f6\u5019\u6a21\u5757\u9700\u8981\u4e0e\u5bbf\u4e3b\u6a21\u5757\u5171\u4eab\u4f9d\u8d56\uff0c\u4e5f\u5c31\u662f\u6709\u53ef\u80fd\u4f1a\u7528\u5230\u67d0\u4e2a\u6a21\u5757\uff0c\u4f46\u81ea\u5df1\u4e0d\u5b89\u88c5\uff0c\u5e0c\u671b\u5bbf\u4e3b\u73af\u5883\u5b89\u88c5\u7684\u65f6\u5019\u4f7f\u7528 peerDependencies \u58f0\u660e\u3002"),(0,l.kt)("p",null,"5.repository"),(0,l.kt)("p",null,"\u6307\u5b9a\u6a21\u5757\u6e90\u7801\u4fe1\u606f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'"repository": {\n  "type": "git",\n  "url": "https://github.com/facebook/react.git",\n  "directory": "packages/react"\n},\n')),(0,l.kt)("p",null,"6.main"),(0,l.kt)("p",null,"\u6807\u8bc6\u6a21\u5757\u5165\u53e3\u6587\u4ef6\uff0c\u6bd4\u5982react\u7684",(0,l.kt)("inlineCode",{parentName:"p"},'main: "index.js"')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4e0b\u9762\u4e24\u53e5\u5199\u6cd5\u542b\u4e49\u76f8\u540c\nconst react = require('react');\nconst react = require('react/index.js');\n")),(0,l.kt)("p",null,"7.script"),(0,l.kt)("p",null,"\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"npm run <script_name>"),"\u6765\u8fd0\u884c\u811a\u672c"),(0,l.kt)("h1",{id:"\u4e8c\u57fa\u7840api"},"\u4e8c\u3001\u57fa\u7840API"),(0,l.kt)("h2",{id:"path"},"path"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Path\u6a21\u5757\u5728Windows\u548cPOSIX\uff08Linux\u3001Mac OS\uff09\u4e0a\u5904\u7406\u662f\u6709\u5dee\u5f02\u7684\u3002")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"path.basename(path [, ext])"),"\uff1a\u8fd4\u56de\u8def\u5f84\u7684\u6700\u7ec8\u6307\u5411\u4f4d\u7f6e\uff08\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u90fd\u53ef\u4ee5\uff09",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"path\uff1a\u7ed9\u5b9a\u8def\u5f84"),(0,l.kt)("li",{parentName:"ol"},"ext\uff1a\u53ef\u9009\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u5982\u679c\u5339\u914d\u5230\u4e86\u5c31\u53ea\u8fd4\u56de\u6587\u4ef6\u540d\u3002")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"path.basename('/foo/bar/baz/asdf/quux.txt');    // quux.txt\npath.basename('/foo/bar/baz/asdf/quux.txt','.txt');     // quux\npath.basename('/foo/bar/baz/asdf/quux.txt','.html');    // quux.txt\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"path.dirname(path)"),"\uff1apath\u76ee\u5f55\u540d"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"path.extname(path)"),"\uff1apath\u6269\u5c55\u540d\uff0c\u5982\u679c\u6ca1\u6709\u6269\u5c55\u540d\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const myPath = '/foo/bar/baz/asdf/vue.config.js';\nconsole.log(path.dirname(myPath));      // /foo/bar/baz/asdf\nconsole.log(path.extname(myPath));      // .js\n")),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"path.delimiter"),"\uff1a\u64cd\u4f5c\u7cfb\u7edf\u754c\u5b9a\u7b26\u53f7"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"windows\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},";")),(0,l.kt)("li",{parentName:"ol"},"POSIX\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},":")))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"path.sep"),"\uff1a\u8def\u5f84\u5206\u5272\u7b26"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"windows\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"\\")),(0,l.kt)("li",{parentName:"ol"},"POSIX\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"/")))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"path.parse(path)"),"\uff1a\u6587\u4ef6\u8def\u5f84\u5b57\u7b26\u4e32---\x3e\u5bf9\u8c61")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"path.format(parseObject)"),"\uff1a\u5bf9\u8c61---\x3e\u6587\u4ef6\u8def\u5f84\u5b57\u7b26\u4e32"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const parseObject = {\n  root: '/',\n  dir: '/foo/bar/baz/asdf',\n  base: 'vue.config.js',\n  ext: '.js',\n  name: 'vue.config'\n}\n")),(0,l.kt)("ol",{start:8},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"path.normalize(path)"),"\uff1a\u89c4\u8303\u5316\u7ed9\u5b9a\u7684path\u5b57\u7b26\u4e32"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"path.join([...paths])"),"\uff1a\u8fde\u63a5path\u7247\u6bb5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"path.join('/foo', 'bar', 'baz/asdf', 'quux', '..');     // \\foo\\bar\\baz\\asdf\n")),(0,l.kt)("ol",{start:10},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"path.relative(from, to)"),"\uff1a\u8fd4\u56de from \u5230 to \u7684\u76f8\u5bf9\u8def\u5f84")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"path.relative('/data/test/aaa', '/data/impl/bbb');      // ..\\..\\impl\\bbb\n")),(0,l.kt)("ol",{start:11},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"path.resolve([...paths])"),"\uff1a\u6bcf\u4e2a\u540e\u7eed\u7684path\u4f1a\u88ab\u8ffd\u52a0\u5230\u524d\u9762\uff0c\u76f4\u5230\u6784\u5efa\u7edd\u5bf9\u8def\u5f84\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4ece\u53f3\u5230\u5de6\u6784\u5efa\u4e86\u7edd\u5bf9\u8def\u5f84\n// F:\\static_files\\gif\\image.gif\npath.resolve('wwwroot', '/static_files/png/', '../gif/image.gif');\n// \u7531\u4e8e\u4ece\u53f3\u5230\u5de6\u4e00\u76f4\u6ca1\u6709\u6784\u5efa\u7edd\u5bf9\u8def\u5f84\uff0c\u56e0\u6b64\u6700\u7ec8\u4f1a\u52a0\u4e0a\u6267\u884c\u8be5\u6587\u4ef6\u7684\u76ee\u5f55\n// F:\\Project\\node-study\\wwwroot\\static_files\\gif\\image.gif\npath.resolve('wwwroot', 'static_files/png/', '../gif/image.gif');\n")),(0,l.kt)("h2",{id:"events"},"events"),(0,l.kt)("p",null,"\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff0c\u7ef4\u62a4\u4e86\u4e00\u4e2a\u4e8b\u4ef6\u6570\u7ec4\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"emitter.on(eventName, listener)"),"\uff1a\u8ba2\u9605\uff0c\u52a0\u5165\u5230\u4e8b\u4ef6\u6570\u7ec4\u5c3e\u90e8\u3002",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"emitter.once(eventName, listener)"),"\uff1a\u8ba2\u9605\u4e00\u6b21"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"emitter.emit(eventName[, ...args])"),"\uff1a\u53d1\u5e03"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"emitter.off(eventName, listener)"),"\uff1a\u53d6\u6d88\u8ba2\u9605",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"emitter.removeListener(eventName, listener)"),"\uff1a\u53d6\u6d88\u8ba2\u9605"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"emitter.prependListener(eventName, listener)"),"\uff1a\u628a listener \u6dfb\u52a0\u5230\u4e8b\u4ef6\u6570\u7ec4\u5934\u90e8\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const EventEmitter = require('events');\nconst ee = new EventEmitter();\n\nconst listener1 = (...args) => {\n  console.log('a', ...args);\n};\nconst listener2 = () => console.log('b');\nconst listener3 = (x, ...y) => console.log('c', x, y);\nee.on('foo', listener1);\nee.on('foo', listener2);\nee.on('foo', listener3);\n\nee.off('foo', listener2);\nee.emit('foo', 1, 2, 3, 4, 5, 6);\n/**************\na 1 2 3 4 5 6\nc 1 [ 2, 3, 4, 5, 6 ]\n***************/\n")),(0,l.kt)("h2",{id:"process"},"process"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7cfb\u7edf\u4fe1\u606f",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.title"),"\uff1a\u8fdb\u7a0b\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3anode"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.pid"),"\uff1a\u5f53\u524d\u8fdb\u7a0b\u7684pid",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"pid\u662f\u8fdb\u7a0b\u7684\u552f\u4e00\u6807\u8bc6"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.ppid"),"\uff1a\u5f53\u524d\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0bpid"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.platform"),"\uff1a\u8fdb\u7a0b\u8fd0\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.version"),"\uff1aNode.js\u7248\u672c"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.env"),"\uff1a\u5f53\u524dShell\u7684\u6240\u6709\u73af\u5883\u53d8\u91cf",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Windows \u4e0d\u652f\u6301",(0,l.kt)("inlineCode",{parentName:"li"},"NODE_ENV=production"),"\u7684\u8bbe\u7f6e\u65b9\u5f0f\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u501f\u52a9cross-env"))))),(0,l.kt)("li",{parentName:"ol"},"\u6267\u884c\u4fe1\u606f",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.execPath"),"\uff1a\u6267\u884c\u5f53\u524d\u811a\u672c\u7684 Node \u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.argv"),"\uff1a\u8fd4\u56de\u6570\u7ec4\uff0c\u524d\u4e24\u9879\u56fa\u5b9a\u3002",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\u7b2c\u4e00\u4e2a\u5143\u7d20\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"process.execPath"),"\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff1a\u6b63\u5728\u6267\u884c\u7684 JavaScript \u6587\u4ef6\u7684\u8def\u5f84\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5176\u4ed6\u5143\u7d20\uff1a\u4efb\u4f55\u5176\u4ed6\u547d\u4ee4\u884c\u53c2\u6570\u3002"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.execArgv"),"\uff1a\u8fd4\u56de\u6570\u7ec4\uff0c\u6570\u7ec4\u5143\u7d20\u662f\u4f20\u5165\u7684\u4e00\u7ec4",(0,l.kt)("strong",{parentName:"li"},"\u7279\u5b9a\u4e8e Node.js \u7684\u547d\u4ee4\u884c\u9009\u9879"),"\u3002")))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u540c\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u6709\u7684\u662fNode.js\u547d\u4ee4\u884c\u9009\u9879\uff0c\u4f46\u6709\u7684\u4e0d\u662f")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const process = require('process');\nconsole.log(process.execPath);\nconsole.log(process.argv);\nconsole.log(process.execArgv);\n// \u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884cnode --harmony test.js --nick chyingp \n/**************\nF:\\Software\\node\\node.exe\n[\n  'F:\\\\Software\\\\node\\\\node.exe',\n  'F:\\\\Project\\\\node-study\\\\test.js',\n  '--nick',\n  'chyingp'\n]\n[ '--harmony' ]\n***************/\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u8d44\u6e90\u67e5\u770b",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.uptime()"),"\uff1a\u5f53\u524d\u8fdb\u7a0b\u8fd0\u884c\u591a\u957f\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.memoryUsage()"),"\uff1a\u8fdb\u7a0b\u5360\u7528\u7684\u5185\u5b58\uff0c\u5355\u4f4d\u4e3a\u5b57\u8282\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.cpuUsage([previousValue])"),"\uff1aCPU\u4f7f\u7528\u65f6\u95f4\u8017\u65f6\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"user\u8868\u793a\u7528\u6237\u7a0b\u5e8f\u4ee3\u7801\u8fd0\u884c\u5360\u7528\u7684\u65f6\u95f4\u3002"),(0,l.kt)("li",{parentName:"ol"},"system\u8868\u793a\u7cfb\u7edf\u5360\u7528\u65f6\u95f4\u3002")))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const process = require('process');\nconst startUsage = process.cpuUsage();\n// { user: 38579, system: 6986 }\n\n// spin the CPU for 500 milliseconds\nconst now = Date.now();\nwhile (Date.now() - now < 500);\n\nconsole.log(process.cpuUsage(startUsage));\n// { user: 514883, system: 11226 }\n")),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},"\u65b9\u6cd5",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.exit([code])"),"\uff1a\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\u3002",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\u7edd\u5927\u591a\u6570\u60c5\u51b5\u6ca1\u6709\u5fc5\u8981\u663e\u793a\u8c03\u7528\uff0c\u5982\u679c\u4e8b\u4ef6\u5faa\u73af\u4e2d\uff0c\u6ca1\u6709\u5176\u4ed6\u5f85\u5904\u7406\u7684\u5de5\u4f5c\uff0c\u5219 Node.js \u8fdb\u7a0b\u5c06\u81ea\u884c\u9000\u51fa\u3002 "),(0,l.kt)("li",{parentName:"ol"},"\u5373\u4f7f\u4ecd\u6709\u672a\u5b8c\u5168\u5b8c\u6210\u7684\u5f02\u6b65\u64cd\u4f5c\u6302\u8d77\uff0c\u6bd4\u5982IO\uff0c\u4e5f\u4f1a\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\u3002\u4e3a\u4e86\u89e3\u51b3\u7ec8\u6b62\u524dIO\u672a\u5b8c\u5168\u5199\u5165\u7b49\u64cd\u4f5c\uff0c\u5efa\u8bae\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"process.exitCode"),"\u8bbe\u7f6e\u9000\u51fa\u7801\uff0c\u7136\u540e\u4e0d\u7ed9\u4e8b\u4ef6\u5faa\u73af\u4e2d\u5b89\u6392\u5de5\u4f5c\u3002"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.kill(pid[, signal])"),"\uff1a\u5c06signal\u53d1\u9001\u5230\u7531pid\u6807\u8bc6\u7684\u8fdb\u7a0b\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.nextTick(fn)"),"\uff1a\u5f02\u6b65\u5fae\u4efb\u52a1\uff0c\u5c06fn\u6dfb\u52a0\u5230\u4e0b\u4e00\u4e2a\u65f6\u95f4\u70b9\u7684\u961f\u5217\u6267\u884c\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.cwd()"),"\uff1a\u8fd4\u56de\u5f53\u524d\u5de5\u4f5c\u8def\u5f84\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"process.chdir(directory)"),"\uff1a\u5207\u6362\u5f53\u524d\u5de5\u4f5c\u8def\u5f84\u3002")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const process = require('process');\nconsole.log(process.cwd());\ntry {\n  process.chdir('F:\\\\Software');\n  console.log(process.cwd());\n} catch (err) {\n  console.log('\u6ca1\u6709\u5f53\u524d\u76ee\u5f55!');\n}\n/**************\nF:\\Project\\node-study\nF:\\Software\n***************/\n")),(0,l.kt)("ol",{start:5},(0,l.kt)("li",{parentName:"ol"},"\u4e8b\u4ef6",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"exit"),"\uff1a\u548c",(0,l.kt)("inlineCode",{parentName:"li"},"process.exit()"),"\u4f5c\u7528\u76f8\u540c"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeExit"),"\uff1a\u5f53\u4e8b\u4ef6\u5faa\u73af\u6e05\u7a7a\u4e14\u6ca1\u6709\u5176\u4ed6\u5de5\u4f5c\u8981\u5b89\u6392\u65f6\uff0c\u4f1a\u89e6\u53d1\u8be5\u4e8b\u4ef6\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"uncaughtException"),"\uff1a\u5f53\u524d\u8fdb\u7a0b\u629b\u51fa\u4e00\u4e2a\u6ca1\u6709\u88ab\u6355\u6349\u7684\u9519\u8bef\u65f6\u4f1a\u89e6\u53d1\u8be5\u4e8b\u4ef6\u3002")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"process.on('uncaughtException', function (err) {\n  console.error(err.stack);\n});\n")),(0,l.kt)("ol",{start:6},(0,l.kt)("li",{parentName:"ol"},"\u6807\u51c6\u8f93\u5165\u8f93\u51fa")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"process.stdin"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"process.stdout"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"process.stderr"),"\u5206\u522b\u4ee3\u8868\u8fdb\u7a0b\u7684\u6807\u51c6\u8f93\u5165\u3001\u6807\u51c6\u8f93\u51fa\u3001\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const process = require('process');\nprocess.stdin.setEncoding('utf8');\nprocess.stdin.on('readable', () => {\n  var chunk = process.stdin.read();\n  if (chunk !== null) {\n    process.stdout.write(`data: ${chunk}`);\n  }\n});\n")),(0,l.kt)("h2",{id:"url"},"url"),(0,l.kt)("h3",{id:"url\u5bf9\u8c61"},"URL\u5bf9\u8c61"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6709\u4e9b\u6559\u7a0b\u4f1a\u63d0\u5230",(0,l.kt)("inlineCode",{parentName:"p"},"urlObject"),"\u5bf9\u8c61\uff0c\u8fd9\u662f\u65e7\u7684API\uff0c\u5e94\u8be5\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u3002")),(0,l.kt)("p",null,"\u7528\u6765\u505aURL\u89e3\u6790\uff0c\u5173\u4e8e\u5404\u90e8\u5206\uff0c\u5b98\u7f51\u7ed9\u51fa\u5982\u4e0b\u56fe\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                              href                                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 protocol \u2502  \u2502        auth         \u2502          host          \u2502           path            \u2502 hash  \u2502\n\u2502          \u2502  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524       \u2502\n\u2502          \u2502  \u2502 username \u2502 password \u2502    hostname     \u2502 port \u2502 pathname \u2502     search     \u2502       \u2502\n\u2502          \u2502  \u2502          \u2502          \u2502                 \u2502      \u2502          \u251c\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524       \u2502\n\u2502    origin   \u2502          \u2502          \u2502           origin       \u2502          \u2502 \u2502    query     \u2502       \u2502\n"  https:   //    user   :   pass   @ sub.example.com : 8080   /p/a/t/h  ?  query=string   #hash "\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6784\u9020URL\u5bf9\u8c61\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"new URL(input[, base])"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"input\uff1aurl\u5b57\u7b26\u4e32",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u5982",(0,l.kt)("inlineCode",{parentName:"li"},"https://example.org"),"\uff0c\u5219\u4e0d\u9700\u8981base"),(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u5982",(0,l.kt)("inlineCode",{parentName:"li"},"/foo"),"\uff0c\u5219\u9700\u8981base"))),(0,l.kt)("li",{parentName:"ol"},"base\uff1a\u57fa\u7840\u5730\u5740")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"new URL('https://example.org');\nnew URL('/foo', 'https://example.org/'); // https://example.org/foo\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u5c5e\u6027")),(0,l.kt)("p",null,"\u5bf9\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"https://user:pass@sub.example.com:8080/p/a/t/h?query=string#hash"),"\uff0cURL\u5bf9\u8c61\u4e3a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"URL {\n  href: 'https://user:pass@sub.example.com:8080/p/a/t/h?query=string#hash',\n  origin: 'https://sub.example.com:8080',\n  protocol: 'https:',\n  username: 'user',\n  password: 'pass',\n  host: 'sub.example.com:8080',\n  hostname: 'sub.example.com',\n  port: '8080',\n  pathname: '/p/a/t/h',\n  search: '?query=string',\n  searchParams: URLSearchParams { 'query' => 'string' },\n  hash: '#hash'\n}\n")),(0,l.kt)("h3",{id:"urlsearchparams"},"URLSearchParams"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"querystring"),"\u6a21\u5757\u662f\u65e7\u7684API\uff0c\u5728\u65b0\u9879\u76ee\u4e2d\u5c3d\u91cf\u4f7f\u7528\u65b0\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"URLSearchParams"),"\u5bf9\u8c61\u6765\u89e3\u6790")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4eceURL\u4e2d\u83b7\u53d6URLSearchParams\u5bf9\u8c61\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const params1 = url.searchParams;\nconst params2 = new URLSearchParams(url.searchParams);\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u65b9\u6cd5\uff0c\u65b9\u6cd5\u4e3a\u5b57\u9762\u610f\u601d",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"get(name)"),(0,l.kt)("li",{parentName:"ol"},"getAll(name)"),(0,l.kt)("li",{parentName:"ol"},"set(name, value)"),(0,l.kt)("li",{parentName:"ol"},"append(name, value)"),(0,l.kt)("li",{parentName:"ol"},"delete(name)"),(0,l.kt)("li",{parentName:"ol"},"has(name)"),(0,l.kt)("li",{parentName:"ol"},"entries()"),(0,l.kt)("li",{parentName:"ol"},"keys()"),(0,l.kt)("li",{parentName:"ol"},"values()"),(0,l.kt)("li",{parentName:"ol"},"toString()\uff1a\u8f6c\u4e3a\u53c2\u6570\u5b57\u7b26\u4e32\u5f62\u5f0f"),(0,l.kt)("li",{parentName:"ol"},"forEach(fn","[, thisArg]",")")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const { URL } = require('url');\nconst url = new URL('https://user:pass@sub.example.com:8080/p/a/t/h?query=string#hash');\n\nconst params = new URLSearchParams(url.searchParams);\nparams.forEach((value, name, searchParams) => {\n  console.log(name, value);\n})\n")),(0,l.kt)("h2",{id:"zlib"},"zlib"),(0,l.kt)("p",null,"\u5de5\u4f5c\u539f\u7406\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6d4f\u89c8\u5668\u53d1\u9001\u8bf7\u6c42\u65f6\u901a\u8fc7\u8bf7\u6c42\u5934\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"accept-encoding"),"\u6807\u8bc6\u652f\u6301\u7684\u538b\u7f29\u683c\u5f0f"),(0,l.kt)("li",{parentName:"ol"},"\u670d\u52a1\u7aef\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"li"},"content-encoding"),"\u6307\u660e\u4f7f\u7528\u7684\u683c\u5f0f"),(0,l.kt)("li",{parentName:"ol"},"\u6d4f\u89c8\u5668\u5f97\u5230\u54cd\u5e94\u62a5\u6587\u540e\uff0c\u4f9d\u636e",(0,l.kt)("inlineCode",{parentName:"li"},"content-encoding"),"\u8fdb\u884c\u89e3\u538b")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"zlib\u51e0\u4e2a\u65b9\u6cd5\u521b\u5efa\u7684\u5bf9\u8c61\u90fd\u662f Transform\u6d41\u3002")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"th"},"accept-encoding")),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"th"},"zlib")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"gzip"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"zlib.createGzip()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"deflate"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"zlib.createDeflate()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"br"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"zlib.createBrotliCompress()"))))),(0,l.kt)("h1",{id:"\u4e09\u6587\u4ef6"},"\u4e09\u3001\u6587\u4ef6"),(0,l.kt)("h2",{id:"api\u98ce\u683c"},"API\u98ce\u683c"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Node.js\u4e2d\u6587\u4ef6\u76f8\u5173\u64cd\u4f5cAPI\u4f1a\u6709\u5982\u4e0b\u56db\u79cd\u98ce\u683c\uff1a"),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"\u56de\u8c03\u98ce\u683c\uff1a\u6700\u65e7\u5f0f\u7684\u98ce\u683c\uff0c\u4f1a\u4ea7\u751f\u56de\u8c03\u5730\u72f1"),(0,l.kt)("li",{parentName:"ul"},"Promise\u98ce\u683c\uff1a\u603b\u662f\u8fd4\u56de\u4e00\u4e2aPromise\u5bf9\u8c61\uff0c\u7136\u540e\u901a\u8fc7Promise\u8303\u5f0f\u5904\u7406\u76f8\u5173\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"promisify\u98ce\u683c\uff1a\u901a\u8fc7util.promisify\u51fd\u6570\u5c06\u6587\u4ef6\u5904\u7406\u51fd\u6570\u53d8\u6210Promise\u98ce\u683c"),(0,l.kt)("li",{parentName:"ul"},"\u540c\u6b65\u98ce\u683c\uff1a\u5728\u51fd\u6570\u540d\u540e\u4f1a\u6709\u6dfb\u52a0\u4e86Sync\u7684API\uff0c\u901a\u8fc7async/await\u5904\u7406\uff0c\u663e\u5f97\u7cbe\u70bc"))),(0,l.kt)("p",null,"1.\u4f20\u7edf\u56de\u8c03\u98ce\u683c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nfs.stat('.', (err, stats) => {\n  if(err) {\n    // \u5904\u7406\u9519\u8bef\u3002\n  } else {\n     // \u4f7f\u7528 stats\n  }\n});\n")),(0,l.kt)("p",null,"2.Promise API"),(0,l.kt)("p",null,"\u8fd4\u56de Promise \u5bf9\u8c61\u800c\u4e0d\u4f7f\u7528\u56de\u8c03"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"require('fs/promises') v14 \u540e\u53ef\u7528")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs').promises;\n// const fs = require('fs/promises');\n\nfs.stat('.').then(stats => {\n  // \u4f7f\u7528 stats\n}).catch(error => {\n  // \u5904\u7406\u9519\u8bef\n});\n")),(0,l.kt)("p",null,"3.promisify"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const util = require('util');\nconst fs = require('fs');\n\nconst stat = util.promisify(fs.stat);\nstat('.').then(stats => {\n  // \u4f7f\u7528 stats\n}).catch(error => {\n  // \u5904\u7406\u9519\u8bef\n});\n")),(0,l.kt)("p",null,"4.\u540c\u6b65\u65b9\u6cd5"),(0,l.kt)("p",null,"\u547d\u540d\u89c4\u5219\u662f\u65b9\u6cd5\u540d\u79f0\u540e\u9762\u6dfb\u52a0 ",(0,l.kt)("inlineCode",{parentName:"p"},"Sync")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\ntry {\n    const stats = fs.statSync('.');\n  // \u4f7f\u7528 stats\n} catch(error) {\n    // \u5904\u7406\u9519\u8bef\n}\n")),(0,l.kt)("h2",{id:"\u6587\u4ef6\u8bfb\u53d6"},"\u6587\u4ef6\u8bfb\u53d6"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6709\u4e9bAPI\u5728\u8fc7\u7a0b\u4e2d\u4f1a\u4ea7\u751fFileHandle\u5bf9\u8c61\uff0c\u662f",(0,l.kt)("strong",{parentName:"p"},"\u6570\u5b57\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u5bf9\u8c61\u5c01\u88c5"),"\u3002"),(0,l.kt)("p",{parentName:"blockquote"},"\u8be5\u5bf9\u8c61\u4e00\u822c\u901a\u8fc7open\u65b9\u6cd5\u521b\u5efa\uff0c\u6700\u7ec8\u5fc5\u987b\u8981\u901a\u8fc7close\u65b9\u6cd5\u9500\u6bc1\u3002")),(0,l.kt)("h3",{id:"readfile"},"readFile()"),(0,l.kt)("p",null,"\u5f02\u6b65\u8bfb\u53d6\u6587\u4ef6\u7684",(0,l.kt)("strong",{parentName:"p"},"\u5168\u90e8"),"\u5185\u5bb9"),(0,l.kt)("p",null,"options\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"encoding\uff1a\u7f16\u7801"),(0,l.kt)("li",{parentName:"ul"},"flag\uff1a\u6587\u4ef6\u7cfb\u7edfflags\u7684\u652f\u6301\uff0c\u9ed8\u8ba4\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"'r'")),(0,l.kt)("li",{parentName:"ul"},"signal\uff1aAbortSignal\u7c7b\u578b\uff0c\u8fd0\u884c\u4e2d\u65ad\u76f8\u5173\u64cd\u4f5c")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6587\u4ef6\u6807\u5fd7\u4f4d\uff1a"),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"r\uff1a\u8bfb\u53d6\uff0c\u6587\u4ef6\u4e0d\u5b58\u5728\u5c31\u5f02\u5e38"),(0,l.kt)("li",{parentName:"ul"},"r+\uff1a\u8bfb\u5199\uff0c\u6587\u4ef6\u4e0d\u5b58\u5728\u5c31\u5f02\u5e38"),(0,l.kt)("li",{parentName:"ul"},"rs+\uff1a\u540c\u6b65\u8bfb\u5199\uff0c\u6587\u4ef6\u4e0d\u5b58\u5728\u5c31\u5f02\u5e38"),(0,l.kt)("li",{parentName:"ul"},"w\uff1a\u5199\u5165\u6587\u4ef6\u4e0d\u5b58\u5728\u5c31\u5f02\u5e38"),(0,l.kt)("li",{parentName:"ul"},"w+\uff1a\u8bfb\u5199\uff0c\u6587\u4ef6\u4e0d\u5b58\u5728\u5c31\u5f02\u5e38")),(0,l.kt)("p",{parentName:"blockquote"},"r+\u548cw+\u90fd\u662f\u8bfb\u5199\uff0c\u5b83\u4eec\u6709\u533a\u522b\u5417\uff1f"),(0,l.kt)("p",{parentName:"blockquote"},"\u5f53\u7136\u6709\u7684\uff0cr+\u6807\u8bc6",(0,l.kt)("strong",{parentName:"p"},"\u5148\u8bfb\u53d6\uff0c\u7136\u540e\u4ece\u5c3e\u90e8\u5f00\u59cb\u5199\u5165"),"\uff1b\u4f46w+\u5219\u662f",(0,l.kt)("strong",{parentName:"p"},"\u4ee5\u8986\u76d6\u5f62\u5f0f\u7684\u5199\u5165"),"\u3002\u56e0\u6b64",(0,l.kt)("strong",{parentName:"p"},"\u8981\u4fee\u6539\u6587\u4ef6\u800c\u4e0d\u662f\u66ff\u6362\u65f6\u5019\u5e94\u8be5\u5c06 flag\u9009\u9879\u8bbe\u7f6e\u4e3ar+ \u800c\u4e0d\u662f\u9ed8\u8ba4\u7684 w\u3002"))),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u56de\u8c03\u65b9\u5f0f")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"fs.readFile('./long.txt', { encoding: 'utf8', flag: 'r' }, (err, data) => {\n  if (err) throw err;\n  console.log(data);\n})\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Promise API\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"fsPromises.readFile(path[, options])"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\nfs.readFile('./long.txt', {\n  encoding: 'utf8',\n  flag: 'r',\n}).then(data => {\n  console.log(data);\n}, err => {\n  console.log(err);\n})\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u540c\u6b65\u65b9\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"async function test() {\n  const buffer = await fs.readFileSync('./long.txt', {\n    encoding: \"utf8\",\n    flag: 'r',\n  })\n  console.log(buffer);\n}\ntest();\n")),(0,l.kt)("h3",{id:"\u7cbe\u786e\u8bfb\u53d6"},"\u7cbe\u786e\u8bfb\u53d6"),(0,l.kt)("p",null,"\u7c7b\u4f3cC\u8bed\u8a00\uff0c\u6709\u4e09\u4e2a\u51fd\u6570\u5b9e\u73b0\u7cbe\u7ec6\u5316\u64cd\u4f5c\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"open()"),(0,l.kt)("li",{parentName:"ul"},"read()",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"options",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"buffer\uff1aBuffer\u7c7b\u578b\uff0c\u5c06\u586b\u5145\u8bfb\u53d6\u7684\u6587\u4ef6\u6570\u636e\u7684\u7f13\u51b2\u533a"),(0,l.kt)("li",{parentName:"ul"},"offset\uff1a\u6574\u6570\u7c7b\u578b\uff0c\u7f13\u51b2\u533a\u4e2d\u5f00\u59cb\u586b\u5145\u7684\u4f4d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"position\uff1a\u6574\u6570\u7c7b\u578b\uff0c\u4ece\u6587\u4ef6\u5f00\u59cb\u8bfb\u53d6\u6570\u636e\u7684\u4f4d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"length\uff1a\u6574\u6570\u7c7b\u578b\uff0c\u4ece\u6587\u4ef6\u5f00\u59cb\u8bfb\u53d6\u7684\u5b57\u8282\u6570"))),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u503c",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"bytesRead\uff1a\u8bfb\u53d6\u7684\u5b57\u8282\u6570"),(0,l.kt)("li",{parentName:"ul"},"buffer\uff1a\u5bf9\u4f20\u5165\u7684buffer\u53c2\u6570\u7684\u5f15\u7528"))))),(0,l.kt)("li",{parentName:"ul"},"close()")),(0,l.kt)("p",null,"\u4ed6\u4eec\u5728\u4e0d\u540cAPI\u98ce\u683c\u4e0b\u5dee\u5f02\u662f\u8f83\u5927\u7684\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u56de\u8c03\u98ce\u683c")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function test() {\n  // fd\u662f\u7531FileHandle\u5bf9\u8c61\u7ba1\u7406\u7684\u6570\u5b57\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0cnumber\u7c7b\u578b\n  fs.open('./long.txt', (err, fd) => {\n    if (err) throw err;\n    const readOptions = {\n      position: 10,\n      length: 36,\n    }\n    fs.read(fd, readOptions, (err, bytesRead, buffer) => {\n      if (err) throw err;\n      console.log(bytesRead, buffer);\n      fs.close(fd, err => {\n        if (err) throw err;\n      })\n    })\n  })\n}\ntest();\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Primise API")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\nasync function test() {\n  // 1.\u6253\u5f00long.txt\u6587\u4ef6\uff0c\u8fd4\u56de\u7528Promise\u5305\u88c5\u7684FileHandler\u5bf9\u8c61\n  const fileHandle = await fs.open('./long.txt');\n  // 2.\u8bfb\u53d6\u9009\u9879\n  const readOptions = {\n    position: 10,\n    length: 36,\n  }\n  const { bytesRead, buffer } = await fileHandle.read(readOptions);\n  console.log(bytesRead, buffer);\n  // 3.\u5173\u95ed\u6587\u4ef6\n  fileHandle.close()\n}\ntest();\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"promisify")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nconst { promisify } = require('util');\n\nconst open = promisify(fs.open);\nconst read = promisify(fs.read);\nconst close = promisify(fs.close);\n\nasync function test() {\n  // const fd = await promisify(fs.open)('./long.txt');\n  const fd = await open('./long.txt');\n  const readOptions = {\n    position: 10,\n    length: 36,\n  }\n  const { bytesRead, buffer } = await read(fd, readOptions);\n  console.log(bytesRead, buffer);\n  await close(fd)\n}\ntest();\n")),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},"\u540c\u6b65\u65b9\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\n\nasync function test() {\n  // fd\u662f\u7531FileHandle\u5bf9\u8c61\u7ba1\u7406\u7684\u6570\u5b57\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0cnumber\u7c7b\u578b\n  const fd = fs.openSync('./long.txt');\n  const readOptions = {\n    position: 10,\n    length: 36,\n  }\n  // \u6ce8\u610f: \u8fd9\u91cc\u8981\u5148\u5206\u914d\u7f13\u5b58\u533a\n  const buffer = Buffer.alloc(40);\n  const bytesRead = fs.readSync(fd, buffer, readOptions);\n  console.log(bytesRead, buffer);\n  fs.closeSync(fd);\n}\ntest();\n")),(0,l.kt)("h3",{id:"fscreatereadstream"},"fs.createReadStream()"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fs.createReadStream(path[, options])"),"\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"path")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"options")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"fd\uff1a\u5982\u679c\u6307\u5b9a\u4e86 fd\uff0c\u5219 ReadStream \u4f1a\u5ffd\u7565 path \u53c2\u6570\uff0c\u4f7f\u7528\u6307\u5b9a\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08\u4e0d\u4f1a\u518d\u6b21\u89e6\u53d1 open \u4e8b\u4ef6\uff09"),(0,l.kt)("li",{parentName:"ul"},"autoClose\uff1a\u9ed8\u8ba4\u503c: true\uff0c\u6587\u4ef6\u8bfb\u53d6\u5b8c\u6210\u6216\u8005\u51fa\u73b0\u5f02\u5e38\u65f6\u662f\u5426\u81ea\u52a8\u5173\u95ed\u6587\u4ef6\u63cf\u8ff0\u7b26"),(0,l.kt)("li",{parentName:"ul"},"start\uff1a\u5f00\u59cb\u8bfb\u53d6\u4f4d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"end\uff1a\u7ed3\u675f\u8bfb\u53d6\u4f4d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"highWaterMark\uff1a\u9ed8\u8ba4\u503c\u4e3a64*1024\uff0c\u666e\u901a\u53ef\u8bfb\u6d41\u4e00\u822c\u662f16k")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nconst rs = fs.createReadStream('./src/test.txt');\nrs.on('open', fd => {\n  console.log(`\u6587\u4ef6\u63cf\u8ff0\u7b26 ${fd} \u5df2\u5206\u914d`);\n});\nrs.on('ready', () => {\n  console.log('\u6587\u4ef6\u5df2\u51c6\u5907\u597d');\n});\nrs.on('data', chunk => {\n  console.log('\u8bfb\u53d6\u6587\u4ef6\u6570\u636e:', chunk.toString());\n});\nrs.on('end', () => {\n  console.log('\u6587\u4ef6\u8bfb\u53d6\u5b8c\u6210');\n});\nrs.on('close', () => {\n  console.log('\u6587\u4ef6\u5df2\u5173\u95ed');\n});\nrs.on('error', (err) => {\n  console.log('\u6587\u4ef6\u8bfb\u53d6\u53d1\u751f\u53d1\u751f\u5f02\u5e38:', err.stack);\n});\n")),(0,l.kt)("h2",{id:"\u6587\u4ef6\u5199\u5165"},"\u6587\u4ef6\u5199\u5165"),(0,l.kt)("h3",{id:"writefile"},"writeFile()"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528Promise API\u5f62\u5f0f\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"fsPromises.writeFile(file, data[, options])"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\nconst data = Buffer.from('Hello, Node.js');\nfs.writeFile('./test.txt', data).then(\n  res => {\n    // res\u662fundefined\n    console.log(typeof res);\n  },\n  err => {\n    console.log(err);\n  }\n)\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u540c\u6b65\u65b9\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nasync function writeData(data) {\n  await fs.writeFileSync('./test.txt', data);\n}\nconst data = Buffer.from('Hello, Node.js!');\nwriteData(data)\n")),(0,l.kt)("h3",{id:"appendfile"},"appendFile()"),(0,l.kt)("p",null,"\u5c06\u6570\u636e\u8ffd\u52a0\u5230\u5c3e\u90e8\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"fs.appendFile(path, data[, options])"),"\uff0c\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"writeFile()"),"\u4f7f\u7528\u7c7b\u4f3c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nasync function appendData(data) {\n  await fs.appendFileSync('./test.txt', data);\n}\nconst data = Buffer.from('Hello, Node.js!');\nappendData(data)\n")),(0,l.kt)("h3",{id:"\u7cbe\u786e\u5199\u5165"},"\u7cbe\u786e\u5199\u5165"),(0,l.kt)("p",null,"\u524d\u9762\u5df2\u7ecf\u4ecb\u7ecd\u4e86open\u3001read\u3001close\u65b9\u6cd5\uff0c\u8fd9\u91cc\u8981\u4ecb\u7ecd\u7684write\u65b9\u6cd5\u548cread\u7c7b\u4f3c"),(0,l.kt)("p",null,"\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cread\u548cwrite\u4e0d\u80fd\u540c\u65f6\u64cd\u4f5c\uff0c\u5b83\u4eec\u90fd\u662f\u5f02\u6b65\u7684\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"fs.writeSync(fd, buffer[, offset[, length[, position]]])")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"fs.writeSync(fd, string[, position[, encoding]])"))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f\u4e4b\u524doption\u53ef\u4ee5\u5199\u6210\u5bf9\u8c61\uff0c\u8fd9\u91cc\u662f\u4e0d\u884c\u7684\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nconst handleFile = async (filePath, writeStr) => {\n  const fd = await fs.openSync(filePath, 'w+');\n  await fs.writeSync(fd, writeStr);\n  await fs.closeSync(fd);\n}\nconst str = '\u7eb8\u4e0a\u5f97\u6765\u7ec8\u89c9\u6d45\uff0c\u7edd\u77e5\u6b64\u4e8b\u8981\u8eac\u884c\\n';\nconst filePath = './test.txt';\nhandleFile(filePath, str)\n")),(0,l.kt)("h3",{id:"fscreatewritestream"},"fs.createWriteStream()"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fs.createWriteStream(path[, options])"),"\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"path"),(0,l.kt)("li",{parentName:"ul"},"options",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"fd\uff1a\u9ed8\u8ba4\u503cnull\uff0c\u5982\u679c\u6307\u5b9a\u4e86 fd\uff0c\u5219\u4f1a\u5ffd\u7565 path \u53c2\u6570\uff0c\u4f7f\u7528\u6307\u5b9a\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08\u4e0d\u4f1a\u518d\u6b21\u89e6\u53d1 open \u4e8b\u4ef6\uff09"),(0,l.kt)("li",{parentName:"ul"},"mode\uff1a\u9ed8\u8ba4\u503c0o666"),(0,l.kt)("li",{parentName:"ul"},"autoClose\uff1a\u9ed8\u8ba4\u503c\u4e3atrue\uff0c\u5f53 'error' \u6216 'finish' \u4e8b\u4ef6\u65f6\uff0c\u6587\u4ef6\u63cf\u8ff0\u7b26\u4f1a\u88ab\u81ea\u52a8\u5730\u5173\u95ed"),(0,l.kt)("li",{parentName:"ul"},"start\uff1a\u5f00\u59cb\u5199\u5165\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u4e0d\u8bbe\u7f6e\u9ed8\u8ba4\u8986\u76d6")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\n// \u4f7f\u7528\u7ba1\u9053\u65b9\u5f0f\nfs.createReadStream('./src/test.txt')\n  .pipe(fs.createWriteStream('./copy.txt'));\n")),(0,l.kt)("h2",{id:"\u6587\u4ef6\u5939\u64cd\u4f5c"},"\u6587\u4ef6\u5939\u64cd\u4f5c"),(0,l.kt)("h3",{id:"fsdir\u7c7b"},"fs.Dir\u7c7b"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u53ef\u8fed\u4ee3"),"\u6807\u8bc6\u76ee\u5f55\u6d41\u7684\u7c7b\uff0c\u7531",(0,l.kt)("inlineCode",{parentName:"p"},"opendir()"),"\u521b\u5efa"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dir.path"),"\uff1a\u6b64\u76ee\u5f55\u7684\u53ea\u8bfb\u8def\u5f84"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dir.read()"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\u4e0d\u4f20\u53c2\u6570\uff1a\u8fd4\u56dePromise\uff0c\u5305\u88c5\u7684Dirent\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ol"},"\u4f20\u5165\u56de\u8c03\u51fd\u6570",(0,l.kt)("inlineCode",{parentName:"li"},"(err,dirent)=>{}"),"\uff1a\u8bfb\u53d6\u5b8c\u6210\u540e\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"li"},"fs.Dirent"),"\u6216null\u8c03\u7528\u56de\u8c03\u51fd\u6570"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dir.close()"),"\uff1a\u5f02\u6b65\u5173\u95ed\u76ee\u5f55\u7684\u5e95\u5c42\u8d44\u6e90\u53e5\u67c4",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dir.close((err)=>{})"),"\uff1a\u5173\u95ed\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u5bfc\u81f4\u9519\u8bef\uff0c\u53ef\u4ee5\u7528\u56de\u8c03\u5f62\u5f0f")))),(0,l.kt)("h3",{id:"fsdirent\u7c7b"},"fs.Dirent\u7c7b"),(0,l.kt)("p",null,"\u662f\u904d\u5386 fs.Dir \u83b7\u5f97\u7684\u76ee\u5f55\u9879\uff0c\u53ef\u4ee5\u662f\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u6216\u5b50\u76ee\u5f55"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u76ee\u5f55\u6761\u76ee\u662f\u6587\u4ef6\u540d\u548c\u6587\u4ef6\u7c7b\u578b\u5bf9\u7684\u7ec4\u5408\u3002")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dirent.name"),"\uff1a\u6587\u4ef6\u540d"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dirent.isDirectory()"),"\uff1a\u662f\u5426\u662f\u76ee\u5f55"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dirent.isFile()"),"\uff1a\u662f\u5426\u662f\u6587\u4ef6"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"dirent.isSymbolicLink()"),"\uff1a\u662f\u5426\u662f\u5bf9\u8c61\u63cf\u8ff0\u7b26\u53f7\u94fe\u63a5")),(0,l.kt)("h3",{id:"\u64cd\u4f5c"},"\u64cd\u4f5c"),(0,l.kt)("p",null,"1.",(0,l.kt)("inlineCode",{parentName:"p"},"fs.opendir(path[, options], callback)"),"\uff1a\u6253\u5f00\u4e00\u4e2a\u76ee\u5f55\uff0c\u8fd4\u56de fs.Dir \u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\nasync function print(path) {\n  try {\n    // dir\u662f\u76ee\u5f55\u5bf9\u8c61\n    const dir = await fs.opendir(path);\n    // \u5f02\u6b65\u8fed\u4ee3\u5668for await\n    for await (const dirent of dir) {\n      console.log(dirent);\n    }\n  } catch (err) {\n    console.error(err);\n  }\n}\nprint('./src');\n")),(0,l.kt)("p",null,"\u901a\u8fc7dir.read()\u8fed\u4ee3dir\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\nasync function print(path) {\n  try {\n    const dir = await fs.opendir(path);\n    let dirent = await dir.read();\n    while (dirent) {\n      console.log(dirent);\n      dirent = await dir.read();\n    }\n  } catch (err) {\n    console.error(err);\n  }\n}\nprint('./src');\n")),(0,l.kt)("p",null,"2.",(0,l.kt)("inlineCode",{parentName:"p"},"fs.readdir(path[, options], callback)"),"\uff1a\u8bfb\u53d6\u76ee\u5f55\u5185\u5bb9\uff0cfiles\u662f\u76ee\u5f55\u4e2d\u7684",(0,l.kt)("strong",{parentName:"p"},"\u6587\u4ef6\u540d"),"\u7684\u6570\u7ec4\u3002"),(0,l.kt)("p",null,"options\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"encoding\uff1a\u9ed8\u8ba4\u503cutf8\uff0c\u5982\u679cencoding\u8bbe\u7f6e\u4e3abuffer\uff0c\u5219\u8fd4\u56de\u7684\u6587\u4ef6\u540d\u662fBuffer\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"withFileTypes\uff1a\u9ed8\u8ba4\u503cfalse\uff0c\u8bbe\u7f6e\u4e3atrue\u540e\u56de\u8c03\u51fd\u6570files\u6570\u7ec4\u5c06\u5305\u542bfs.Dirent\u5bf9\u8c61")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\nasync function print(path) {\n  const files = await fs.readdir(path, {\n    encoding: 'utf8',\n    withFileTypes: true,\n  });\n  console.log(files);\n}\nprint('./src');\n/*****************\n[\n  Dirent { name: 'long.txt', [Symbol(type)]: 1 },\n  Dirent { name: 'test.txt', [Symbol(type)]: 1 }\n]\n*****************/\n")),(0,l.kt)("p",null,"3.",(0,l.kt)("inlineCode",{parentName:"p"},"fs.mkdir(path[, options], callback)"),"\uff1a\u521b\u5efa\u76ee\u5f55"),(0,l.kt)("p",null,"options\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"recursive\uff1a",(0,l.kt)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c false"),"\uff0c\u8bbe\u7f6e\u4e3a true \u65f6\u5019\u8868\u793a\u9012\u5f52\u521b\u5efa"),(0,l.kt)("li",{parentName:"ul"},"mode\uff1a\u9ed8\u8ba4\u503c 0o777\uff0cWindows \u4e0d\u652f\u6301")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\n/**\n * \u521b\u5efa\u76ee\u5f55\uff1a./src/assets/image\n * recursive\u4e3atrue\u8868\u793a\u9012\u5f52\u521b\u5efa\uff0c\u5373\u4f7f\u8def\u5f84\u4e2d\u6709\u6bb5\u6ca1\u6709\u4e5f\u4f1a\u521b\u5efa\n */\nfs.mkdir('./src/assets/image', { recursive: true },).catch(err => {\n  console.log(err);\n})\n")),(0,l.kt)("p",null,"4.",(0,l.kt)("inlineCode",{parentName:"p"},"fs.rm(path[, options], callback)"),"\uff1a\u5220\u9664\u6587\u4ef6\u5939"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5e94\u907f\u514d\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"fs.rmdir()"),"\uff0c\u8f6c\u800c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"fs.rm()"))),(0,l.kt)("p",null,"options\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"force\uff1a\u9ed8\u8ba4\u503cfalse\uff0c\u8bbe\u7f6e\u4e3atrue\u65f6\u5019\u5982\u679c",(0,l.kt)("strong",{parentName:"li"},"path\u4e0d\u5b58\u5728\u5f02\u5e38\u5ffd\u7565"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},"recursive\uff1a",(0,l.kt)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c false"),"\uff0c\u8bbe\u7f6e\u4e3a true \u65f6\u5019\u8868\u793a\u9012\u5f52\u5220\u9664"),(0,l.kt)("li",{parentName:"ul"},"maxRetries\uff1a\u9047\u5230",(0,l.kt)("inlineCode",{parentName:"li"},"EBUSY"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"EMFILE"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"ENFILE"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"ENOTEMPTY")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"li"},"EPERM")," \u9519\u8bef\uff0cNode.js\u4f1a\u4ee5retryDelay\u7684\u65f6\u95f4\u95f4\u9694\u91cd\u8bd5\u8be5\u64cd\u4f5c\u3002maxRetries\u6807\u8bc6\u91cd\u8bd5\u6b21\u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},"retryDelay\uff1a\u91cd\u8bd5\u7684\u65f6\u95f4\u95f4\u9694")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\nconst rmOptions = {\n  force: true,\n  recursive: true,\n}\nfs.rm('./src/assets', rmOptions).catch(err => {\n  console.log(err);\n})\n")),(0,l.kt)("h2",{id:"\u76d1\u89c6"},"\u76d1\u89c6"),(0,l.kt)("h3",{id:"fsfswatcher\u7c7b"},"fs.FSWatcher\u7c7b"),(0,l.kt)("p",null,"\u7528\u4e8e\u76d1\u89c6\u6587\u4ef6\u53d8\u5316\uff0c\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watch()"),"\u540e\u8fd4\u56de\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"fs.FSWatcher"),"\u5b9e\u4f8b\u3002\u6bcf\u5f53\u6307\u5b9a\u76d1\u89c6\u7684\u6587\u4ef6\u88ab\u4fee\u6539\u65f6\uff0c\u5b9e\u4f8b\u4f1a\u89e6\u53d1\u4e8b\u4ef6\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002"),(0,l.kt)("h3",{id:"fswatch"},"fs.watch()"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"fs.watch()"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watchFile()"),"\u90fd\u662f\u76d1\u89c6\u6587\u4ef6\u7684API\uff0c\u4f46",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watchFile()"),"\u4f7f\u7528\u8f6e\u8bad\u65b9\u5f0f\u68c0\u6d4b\u6587\u4ef6\u53d8\u5316\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"interval")," \u6216\u8005\u8bbe\u7f6e\u8f83\u9ad8\u7684\u503c\u4f1a\u53d1\u73b0\u6587\u4ef6\u53d8\u5316\u7684\u76d1\u89c6\u6709\u5ef6\u8fdf\uff0c\u800c",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watch()"),"\u76d1\u542c\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u4e8b\u4ef6\uff0c\u800c\u4e14\u53ef\u4ee5\u76d1\u89c6\u76ee\u5f55\u53d8\u5316\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watch()"),"\u6bd4",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watchFile()"),"\u66f4\u9ad8\u6548\uff0c",(0,l.kt)("strong",{parentName:"p"},"\u5e73\u5e38\u5e94\u5c3d\u53ef\u80fd\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"strong"},"fs.watch()"),"\u4ee3\u66ff",(0,l.kt)("inlineCode",{parentName:"strong"},"fs.watchFile()")),"\u3002")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u56de\u8c03\u5f62\u5f0fAPI\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"fs.watch(filename[, options][, listener])")),(0,l.kt)("li",{parentName:"ul"},"Promise API\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"fsPromises.watch(filename[, options])"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"filename\uff1a",(0,l.kt)("strong",{parentName:"li"},"\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u8def\u5f84")),(0,l.kt)("li",{parentName:"ul"},"options",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"ecoding"),(0,l.kt)("li",{parentName:"ul"},"recursive\uff1a",(0,l.kt)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c false"),"\uff0c\u8bbe\u7f6e\u4e3a true \u65f6\u5019\u8868\u793a\u9012\u5f52\u76d1\u89c6\uff0c\u5373\u76d1\u89c6\u6240\u6709\u5b50\u76ee\u5f55\uff0c",(0,l.kt)("strong",{parentName:"li"},"\u4ec5\u5728Windows\u548cMac OS\u4e0a\u652f\u6301"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},"persistent\uff1a",(0,l.kt)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c true"),"\uff0c\u6307\u793a\u5982\u679c\u6587\u4ef6\u5df2\u6b63\u88ab\u76d1\u89c6\uff0c\u8fdb\u7a0b\u662f\u5426\u5e94\u7ee7\u7eed\u8fd0\u884c\u3002"),(0,l.kt)("li",{parentName:"ul"},"signal"))),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u503c\uff1a",(0,l.kt)("strong",{parentName:"li"},"AsyncIterator\u7c7b\u578b"),"\uff0c\u4e0d\u662fPromise",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"eventType\uff1a\u53d8\u66f4\u7c7b\u578b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"rename\uff1a\u6587\u4ef6\u51fa\u73b0\u6216\u88ab\u5220\u9664"),(0,l.kt)("li",{parentName:"ul"},"change\uff1a\u6587\u4ef6\u53d1\u751f\u4fee\u6539"))),(0,l.kt)("li",{parentName:"ul"},"filename\uff1a\u53d8\u66f4\u6587\u4ef6\u540d\u79f0")))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs/promises');\n(async () => {\n  const watcher = fs.watch('./', { recursive: true });\n  for await (const event of watcher) {\n    console.log(event);\n  }\n})()\n")),(0,l.kt)("h3",{id:"\u793e\u533a\u9009\u62e9"},"\u793e\u533a\u9009\u62e9"),(0,l.kt)("p",null,"fs.watchFile() \u6027\u80fd\u95ee\u9898\uff0cfs.watch() \u5e73\u53f0\u4e0d\u4e00\u81f4\u7b49\u4e24\u4e2a\u65b9\u6cd5\u90fd\u6709\u4e0d\u5c3d\u5982\u4eba\u610f\u7684\u5730\u65b9"),(0,l.kt)("p",null,"Node.js ",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watch"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"MacOS \u6709\u65f6\u5019\u4e0d\u63d0\u4f9b ",(0,l.kt)("inlineCode",{parentName:"li"},"filename")),(0,l.kt)("li",{parentName:"ul"},"\u5728\u90e8\u5206\u573a\u666f\u4e0d\u89e6\u53d1\u4fee\u6539\u4e8b\u4ef6\uff08MacOS Sublime\uff09"),(0,l.kt)("li",{parentName:"ul"},"\u7ecf\u5e38\u4e00\u6b21\u4fee\u6539\u4e24\u6b21\u89e6\u53d1\u4e8b\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"\u5927\u90e8\u5206\u6587\u4ef6\u53d8\u5316 eventType \u90fd\u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"rename"),"."),(0,l.kt)("li",{parentName:"ul"},"\u672a\u63d0\u4f9b\u7b80\u5355\u7684\u76d1\u89c6\u6587\u4ef6\u6811\u65b9\u5f0f")),(0,l.kt)("p",null,"Node.js ",(0,l.kt)("inlineCode",{parentName:"p"},"fs.watchFile"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u4ef6\u5904\u7406\u95ee\u9898\u548c fs.watch \u4e00\u6837\u70c2"),(0,l.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u5d4c\u5957\u76d1\u542c"),(0,l.kt)("li",{parentName:"ul"},"CPU \u6d88\u8017\u5927")),(0,l.kt)("p",null,"\u65e5\u5e38\u5728\u76d1\u89c6\u6587\u4ef6\u53d8\u5316\u53ef\u4ee5\u9009\u62e9\u793e\u533a\u7684\u4f18\u79c0\u65b9\u6848\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/node-watch"},"node-watch")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/chokidar"},"chokidar"))),(0,l.kt)("h2",{id:"\u5176\u4ed6\u5e38\u7528api"},"\u5176\u4ed6\u5e38\u7528API"),(0,l.kt)("h3",{id:"\u5224\u65ad\u8def\u5f84\u662f\u5426\u5b58\u5728"},"\u5224\u65ad\u8def\u5f84\u662f\u5426\u5b58\u5728"),(0,l.kt)("p",null,"\u7531\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"fs.exists()"),"\u7684\u5e9f\u5f03\uff0c\u5728\u4eca\u540e\u63a8\u8350\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"fs.open('./src/longd.txt', 'r').then(\n  fd => {\n    console.log(fd);\n  }, err => {\n    if(err.code ==='ENOENT'){\n      console.log('\u6587\u4ef6\u4e0d\u5b58\u5728');\n    }\n  }\n);\n")),(0,l.kt)("p",null,"\u5904\u7406\u7528\u9519\u8bef\u6355\u6349\uff0c\u8fd8\u53ef\u4ee5\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"fs.access()"),"\u76f8\u5173\u6a21\u5f0f\u8fdb\u884c\u5224\u65ad"),(0,l.kt)("h3",{id:"fsaccess"},"fs.access()"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fs.access(path[, mode], callback)")," \uff1a\u6d4b\u8bd5\u7528\u6237\u5bf9 path \u6307\u5b9a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6743\u9650\u3002"),(0,l.kt)("p",null,"mode\u53ef\u9009\u503c\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u5e38\u91cf"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.F_OK")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u65b9\u6cd5\u9ed8\u8ba4\u503c\uff0c\u8868\u660e\u6587\u4ef6\u5bf9\u8c03\u7528\u8fdb\u7a0b\u53ef\u89c1\uff0c\u53ef\u7528\u4e8e\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.R_OK")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u660e\u8c03\u7528\u8fdb\u7a0b\u53ef\u4ee5\u8bfb\u53d6\u6587\u4ef6")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.W_OK")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u660e\u8c03\u7528\u8fdb\u7a0b\u53ef\u4ee5\u5199\u5165\u6587\u4ef6")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.X_OK")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u660e\u8c03\u7528\u8fdb\u7a0b\u53ef\u4ee5\u6267\u884c\u6587\u4ef6\uff0c\u5728 Windows \u4e0a\u65e0\u6548\uff08\u8868\u73b0\u7b49\u540c ",(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.F_OK"))))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"fs.constants.*"),"\u662f\u5728fs\u4e0b\u7684\uff0c\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"const fs = require('fs/promises');"),"\u662f\u8bbf\u95ee\u4e0d\u5230\u7684\uff0c\u53ea\u80fd\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"const fs = require('fs');"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nfs.access('./src/long.txt', fs.constants.F_OK, (err) => {\n  console.log(err ? '\u4e0d\u5b58\u5728' : '\u5b58\u5728');\n})\n")),(0,l.kt)("h3",{id:"fscopyfile"},"fs.copyFile()"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fs.copyFile(src, dest[, mode], callback)")," \uff1a\u5c06 src \u62f7\u8d1d\u5230 dest\uff0c ",(0,l.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c dest \u5df2\u7ecf\u5b58\u5728\u5219\u4f1a\u8986\u76d6\u3002")),(0,l.kt)("p",null,"mode\u53ef\u9009\u503c\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u5e38\u91cf"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.COPYFILE_EXCL")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5982\u679c\u76ee\u6807\u8def\u5f84\u5b58\u5728\u5219\u5931\u8d25\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.COPYFILE_FICLONE")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u590d\u5236\u64cd\u4f5c\u5c06\u5c1d\u8bd5\u521b\u5efa\u5199\u65f6\u590d\u5236\u5f15\u7528\u94fe\u63a5\u3002 \u5982\u679c\u5e95\u5c42\u5e73\u53f0\u4e0d\u652f\u6301\u5199\u65f6\u590d\u5236\uff0c\u5219\u4f7f\u7528\u56de\u9000\u590d\u5236\u673a\u5236\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"fs.constants.COPYFILE_FICLONE_FORCE")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u590d\u5236\u64cd\u4f5c\u5c06\u5c1d\u8bd5\u521b\u5efa\u5199\u65f6\u590d\u5236\u5f15\u7528\u94fe\u63a5\u3002 \u5982\u679c\u5e95\u5c42\u5e73\u53f0\u4e0d\u652f\u6301\u5199\u65f6\u590d\u5236\uff0c\u5219\u64cd\u4f5c\u5c06\u5931\u8d25\u5e76\u663e\u793a\u9519\u8bef\u3002")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\n// \u901a\u8fc7\u4f7f\u7528 COPYFILE_EXCL\uff0c\u5982\u679c\u76ee\u6807\u6587\u4ef6\u5b58\u5728\uff0c\u5219\u64cd\u4f5c\u5c06\u5931\u8d25\u3002\nfs.promises.copyFile('./src/long.txt', './my-copy.txt', fs.constants.COPYFILE_EXCL).then(\n  () => console.log('\u6e90\u6587\u4ef6\u5df2\u62f7\u8d1d\u5230\u76ee\u6807\u6587\u4ef6'),\n  () => console.log('\u8be5\u6587\u4ef6\u65e0\u6cd5\u62f7\u8d1d')\n)\n")),(0,l.kt)("h3",{id:"fsrename"},"fs.rename()"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fs.rename(oldPath, newPath, callback)")," \uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5982\u679coldPath\u548cnewPath\u90fd\u662f\u540c\u4e00\u8def\u5f84\u4e0b\uff0c\u53ea\u6709\u6587\u4ef6\u540d\u4e0d\u540c\uff0c\u90a3\u4e48\u5c31\u662f\u91cd\u547d\u540d"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679coldPath\u548cnewPath\u4e0d\u662f\u540c\u4e00\u8def\u5f84\u4e0b\uff0c\u90a3\u5c31\u662f\u526a\u8d34\u540e\u91cd\u547d\u540d")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nfs.promises.rename('./src/long.txt', './my-copy.txt').then(\n  () => console.log('\u91cd\u547d\u540d\u6210\u529f'),\n  () => console.log('\u91cd\u547d\u540d\u5931\u8d25')\n)\n")),(0,l.kt)("h3",{id:"fsunlink"},"fs.unlink()"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fs.unlink(path, callback)")," \uff1a\u5220\u9664\u5e38\u89c4\u6587\u4ef6\u6216\u8f6f\u94fe\u63a5\uff0c\u4e0d\u80fd\u7528\u4e8e\u76ee\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nfs.promises.unlink('./my-copy.txt').then(\n  () => console.log('\u5220\u9664\u6210\u529f'),\n  () => console.log('\u5220\u9664\u5931\u8d25')\n)\n")),(0,l.kt)("h3",{id:"fschmod"},"fs.chmod()"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fs.chmod(path, mode, callback)"),"\uff1amode \u4f7f\u7528\u516b\u8fdb\u5236\u8868\u793a ",(0,l.kt)("inlineCode",{parentName:"p"},"0o765")," (0o \u8868\u793a\u6570\u5b57\u662f\u516b\u8fdb\u5236)\uff0c\u548c linux \u6587\u4ef6\u6743\u9650\u89c4\u5219\u4e00\u81f4\uff0c\u540e\u4e09\u4f4d\u6570\u5b57\u5206\u522b\u4ee3\u8868"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6587\u4ef6 owner \u6743\u9650"),(0,l.kt)("li",{parentName:"ol"},"\u6240\u5728 group \u6743\u9650"),(0,l.kt)("li",{parentName:"ol"},"\u5176\u5b83 group \u6743\u9650")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"fs.chmod('my_file.txt', 0o775, (err) => {\n  if (err) throw err;\n  console.log('\u6587\u4ef6 my_file.txt \u7684\u6743\u9650\u5df2\u88ab\u66f4\u6539');\n});\n")),(0,l.kt)("h1",{id:"\u56db\u6d41"},"\u56db\u3001\u6d41"),(0,l.kt)("h2",{id:"\u6570\u636e\u7ed3\u6784\u5316\u5bf9\u8c61"},"\u6570\u636e\u7ed3\u6784\u5316\u5bf9\u8c61"),(0,l.kt)("p",null,"\u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7c7b\u578b\u5316\u6570\u7ec4\uff08TypedArray\uff09\uff1a\u5728\u6807\u51c6\u4e2d\u5373\u6570\u7ec4\u5bf9\u8c61Array\uff0c\u5728ES2017\u540e\u5f15\u5165\u4e86",(0,l.kt)("inlineCode",{parentName:"li"},"Int8Array"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"Unit8Array"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"Float32Array"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"BigInt64Array"),"\u7b49\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"ArrayBuffer"),"\u548c",(0,l.kt)("inlineCode",{parentName:"li"},"SharedArrayBuffer")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"DataView"))),(0,l.kt)("h3",{id:"typedarray"},"TypedArray"),(0,l.kt)("p",null,"\u8be5\u5bf9\u8c61\u63cf\u8ff0\u4e00\u4e2a\u5e95\u5c42\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u7f13\u51b2\u533a\u7684\u4e00\u4e2a\u7c7b\u6570\u7ec4\u89c6\u56fe\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Int8Array"),"\uff1a\u4e8c\u8fdb\u5236\u8865\u78018\u4f4d\u6709\u7b26\u53f7\u6574\u6570\u7684\u6570\u7ec4\uff0c\u56e0\u6b64\u8303\u56f4\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"0b10000000~0b01111111"),"\uff08\u5341\u8fdb\u5236",(0,l.kt)("inlineCode",{parentName:"li"},"-128~127"),"\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Uint8Array"),"\uff1a\u4e8c\u8fdb\u5236\u8865\u78018\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u7684\u6570\u7ec4\uff0c\u56e0\u6b64\u8303\u56f4\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"0b00000000~0b11111111"),"\uff08\u5341\u8fdb\u5236",(0,l.kt)("inlineCode",{parentName:"li"},"0~255"),"\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Float32Array"),"\uff1a32\u4f4d\u6d6e\u70b9\u6570\u578b\u6570\u7ec4"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BigInt64Array"),"\uff1a64\u4f4d\u6709\u7b26\u53f7\u6574\u6570\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u521d\u59cb\u5316\u503c\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"0n"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const arr1 = new Int8Array(8);\narr1[0] = 0b01111111;   // +\u6700\u5927\narr1[1] = 0b00000001;   // +\u6700\u5c0f\narr1[2] = 0b11111111;   // -\u6700\u5927\narr1[3] = 0b10000000;   // -\u6700\u5c0f\nconsole.log(arr1);\nconsole.log(arr1.length);   // \u6570\u7ec4\u957f\u5ea6\nconsole.log(arr1.BYTES_PER_ELEMENT);    // \u6570\u7ec4\u5143\u7d20\u5360\u51e0\u4e2a\u5b57\u8282\n\nconst arr2 = new Uint8Array(8);\narr2[0] = 0b00000000;   // \u6700\u5c0f\narr2[1] = 0b11111111;   // \u6700\u5927\nconsole.log(arr2);\nconsole.log(arr2.length);\nconsole.log(arr2.BYTES_PER_ELEMENT);\n\nconst arr3 = new Int16Array(8);\narr3[0] = 0b0111111111111111;\narr3[1] = 0b0000000000000001;\narr3[2] = 0b1111111111111111;\narr3[3] = 0b1000000000000000;\nconsole.log(arr3);\nconsole.log(arr3.length);\nconsole.log(arr3.BYTES_PER_ELEMENT);\n\n/*************************\nInt8Array(8) [\n  127, 1, -1, -128,\n    0, 0,  0,    0\n]\n8\n1\nUint8Array(8) [\n  0, 255, 0, 0,\n  0,   0, 0, 0\n]\n8\n1\nInt16Array(8) [\n   32767, 1, -1,\n  -32768, 0,  0,\n       0, 0\n]\n8\n2\n*************************/\n")),(0,l.kt)("p",null,"\u521b\u5efaTypedArray\u6570\u7ec4\u7684\u56db\u79cd\u65b9\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// 1.\u521b\u5efa\u957f\u5ea6\u4e3a8\u7684Int32\u6570\u7ec4\nconst arr1 = new Int32Array(8);\n// 2.\u901a\u8fc7\u6570\u7ec4\u521b\u5efa\nconst arr2 = new Int32Array([21, 22]);\n// 3.\u901a\u8fc7\u5176\u4ed6TypedArray\u521b\u5efa\nconst arr3 = new Int32Array(arr2);\n// 4.\u901a\u8fc7ArrayBuffer\u521b\u5efa\uff0c\u4e09\u4e2a\u53c2\u6570\u5206\u522b\u4e3abuffer,byteOffset,length\nconst arr4 = new Int32Array(new ArrayBuffer(16), 0, 4);\n")),(0,l.kt)("p",null,"\u81f3\u4e8e\u4e00\u4e9b\u5177\u4f53\u7684\u65b9\u6cd5\uff0c\u8fd9\u91cc\u4e0d\u662f\u91cd\u70b9\uff0c\u5f88\u591a\u548cArray\u7c7b\u4f3c\u3002"),(0,l.kt)("h3",{id:"arraybuffer"},"ArrayBuffer"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"ArrayBuffer"),"\u5bf9\u8c61\u7528\u6765\u8868\u793a\u901a\u7528\u7684\u3001\u56fa\u5b9a\u957f\u5ea6\u7684\u539f\u59cb\u4e8c\u8fdb\u5236\u6570\u636e\u7f13\u51b2\u533a\u3002"),(0,l.kt)("p",null,"\u4f60\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5c ",(0,l.kt)("inlineCode",{parentName:"p"},"ArrayBuffer")," \u7684\u5185\u5bb9\uff0c\u800c\u662f",(0,l.kt)("strong",{parentName:"p"},"\u8981\u901a\u8fc7TypedArray\u6216DataView\u5bf9\u8c61\u6765\u64cd\u4f5c"),"\uff0c\u5b83\u4eec\u4f1a\u5c06\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u8868\u793a\u4e3a\u7279\u5b9a\u7684\u683c\u5f0f\uff0c\u5e76\u901a\u8fc7\u8fd9\u4e9b\u683c\u5f0f\u6765\u8bfb\u5199\u7f13\u51b2\u533a\u7684\u5185\u5bb9\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// create an ArrayBuffer with a size in bytes\nconst buffer = new ArrayBuffer(8);\nconsole.log(buffer.byteLength);     // 8\n")),(0,l.kt)("h3",{id:"dataview"},"DataView"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"DataView"),"\u89c6\u56fe\u662f\u4e00\u4e2a\u53ef\u4ee5\u4ece\u4e8c\u8fdb\u5236",(0,l.kt)("inlineCode",{parentName:"p"},"ArrayBuffer"),"\u5bf9\u8c61\u4e2d\u8bfb\u5199\u591a\u79cd\u6570\u503c\u7c7b\u578b\u7684\u5e95\u5c42\u63a5\u53e3\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const buffer = new ArrayBuffer(8);\n// \u521b\u5efa\u89c6\u56fe\nconst view1 = new DataView(buffer);\nconst view2 = new DataView(buffer, 4, 2);\n// \u5c06byteOffset\u4e3a4\u540e\u76842\u5b57\u8282\u8bbe\u7f6e\u4e3a0x1010\uff0c\u53731111000011110000\nview1.setInt16(4, 0x1010);\n// \u83b7\u53d6view2\u89c6\u56febyteOffset\u4e3a0\u540e\u76842\u5b57\u8282\u7684\u503c\nconsole.log(view2.getInt16(0));\n// \u83b7\u53d6\u89c6\u56fe\u5bf9\u5e94\u7684ArrayBuffer\nconsole.log(view2.buffer);\n/****************\n4112\nArrayBuffer {\n  [Uint8Contents]: <00 00 00 00 10 10 00 00>,\n  byteLength: 8\n}\n*****************/\n")),(0,l.kt)("h2",{id:"buffer"},"Buffer"),(0,l.kt)("h3",{id:"\u5b9e\u4f8b\u5316buffer"},"\u5b9e\u4f8b\u5316Buffer"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"Buffer.from()"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\u4f20\u5165\u5b57\u7b26\u4e32"),(0,l.kt)("li",{parentName:"ol"},"\u4f20\u5165buffer\uff0c\u521b\u5efa\u526f\u672c"),(0,l.kt)("li",{parentName:"ol"},"\u4f20\u5165\u6570\u5b57\u6570\u7ec4"),(0,l.kt)("li",{parentName:"ol"},"\u4f20\u5165ArrayBuffer\uff0c",(0,l.kt)("strong",{parentName:"li"},"\u5171\u4eab\u5185\u5b58")),(0,l.kt)("li",{parentName:"ol"},"\u4f20\u5165\u652f\u6301valueOf\u6216Symbol.toPrimitive\u7684\u5bf9\u8c61",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"valueOf"),"\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"Buffer.from(object.valueOf(), offsetOrEncoding, length)")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"Symbol.toPrimitive"),"\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"Buffer.from(object[Symbol.toPrimitive]('string'), offsetOrEncoding)"))))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// 1.\u901a\u8fc7\u5b57\u7b26\u4e32\u521b\u5efabuffer\nconst buf1 = Buffer.from('Hello', 'utf-8');\nconsole.log(buf1);  // <Buffer 48 65 6c 6c 6f>\n// 2.\u901a\u8fc7buffer\u521b\u5efa\u526f\u672cbuffer\nconst buf2 = Buffer.from(buf1);\nconsole.log(buf2, buf1 === buf2);   // <Buffer 48 65 6c 6c 6f> false\n// 3.\u901a\u8fc7\u6570\u5b57\u6570\u7ec4\u521b\u5efabuffer\nconst buf3 = Buffer.from([0x56, 0xff, 0xc3]);\nconsole.log(buf3);  // <Buffer 56 ff c3>\n// 4.\u4e0eArrayBuffer\u5171\u4eab\u5185\u5b58\nconst ab = new Int8Array([10, 16]);\nconst buf4 = Buffer.from(ab.buffer);\nconsole.log(buf4);\n// \u7531\u4e8e\u662f\u5171\u4eab\u5185\u5b58\uff0c\u4fee\u6539\u540eBuffer\u4e5f\u4f1a\u8ddf\u7740\u81ea\u52a8\u4fee\u6539\nab[1] = 11;\nconsole.log(buf4);\n// 5.\u652f\u6301valueOf\u6216Symbol.toPrimitive\u7684\u5bf9\u8c61\uff0c\u521d\u59cb\u5316Buffer\nclass Foo {\n  [Symbol.toPrimitive]() {\n    return 'this is a test';\n  }\n}\nconst buf5 = Buffer.from(new Foo())\nconsole.log(buf5);\n/****************\n<Buffer 48 65 6c 6c 6f>\n<Buffer 48 65 6c 6c 6f> false\n<Buffer 56 ff c3>\n<Buffer 0a 10>\n<Buffer 0a 0b>\n<Buffer 74 68 69 73 20 69 73 20 61 20 74 65 73 74>\n*****************/\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"Buffer.alloc()"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/**\n * size: buffer\u5927\u5c0f\n * fill: \u8981\u586b\u5145\u7684\u521d\u59cb\u503c\n * encoding: \u5982\u679cfill\u662f\u5b57\u7b26\u4e32\uff0c\u5219\u8fd9\u662f\u5b83\u7684\u5b57\u7b26\u7f16\u7801\uff0c\u9ed8\u8ba4utf8\n */\nconst buf = Buffer.alloc(8,'ab','utf8')\nconsole.log(buf);   // <Buffer 61 62 61 62 61 62 61 62>\n")),(0,l.kt)("h3",{id:"buffer\u548cstring\u8f6c\u6362"},"Buffer\u548cstring\u8f6c\u6362"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u5b57\u7b26\u4e32---\x3eBuffer\nconst buf1 = Buffer.from('test', 'utf8')\nconsole.log(buf1);\n// Buffer---\x3e\u5b57\u7b26\u4e32\nconst str1 = buf1.toString();\nconst str2 = buf1.toString('hex');\nconsole.log(str1, str2);\n")),(0,l.kt)("h3",{id:"buffer\u62fc\u63a5"},"Buffer\u62fc\u63a5"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Buffer.concat(list[, totalLength])"),"\uff1a\u53ef\u4ee5\u628a\u591a\u4e2a Buffer \u5b9e\u4f8b\u62fc\u63a5\u4e3a\u4e00\u4e2a Buffer \u5b9e\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const buf1 = Buffer.from('a');\nconst buf2 = Buffer.from('b');\nconst buf3 = Buffer.from('c');\nconsole.log(Buffer.concat([buf1, buf2, buf3]));\n")),(0,l.kt)("h3",{id:"stringdecoder"},"StringDecoder"),(0,l.kt)("p",null,"\u5728Node.js\u4e2d\u6c49\u5b57\u5b57\u7b26\u662f\u7531\u4e09\u4e2a\u5b57\u8282\u8868\u793a\u7684\uff0c\u5982\u679c\u5904\u7406\u4e2d\u6587\u5b57\u7b26\u65f6\u5019\u4f7f\u7528\u76843\u7684\u500d\u6570\u7684\u5b57\u8282\u6570\uff0c\u5c31\u4f1a\u9020\u6210\u5b57\u7b26\u62fc\u63a5\u4e71\u7801\u95ee\u9898\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const buf = Buffer.from('\u4e2d\u6587\u5b57\u7b26\u4e32\uff01');\nfor (let i = 0; i < buf.length; i += 5) {\n  const b = Buffer.allocUnsafe(5);\n  buf.copy(b, 0, i);\n  console.log(b.toString());\n}\n")),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(1315).Z,width:"447",height:"186"})),(0,l.kt)("p",null,"\u4f7f\u7528 string_decoder \u6a21\u5757\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a"),(0,l.kt)("p",null,"StringDecoder\u5728\u5f97\u5230\u7f16\u7801\u540e\uff0c\u77e5\u9053\u5bbd\u5b57\u8282\u5728utf-8\u4e0b\u53603\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u5728\u5904\u7406\u672b\u5c3e\u4e0d\u5168\u7684\u5b57\u8282\u65f6\uff0c\u4f1a\u4fdd\u7559\u5230\u7b2c\u4e8c\u6b21write()\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const { StringDecoder } = require('string_decoder');\nconst buf = Buffer.from('\u4e2d\u6587\u5b57\u7b26\u4e32\uff01');\nconst decoder = new StringDecoder('utf8');\nfor (let i = 0; i < buf.length; i += 5) {\n  const b = Buffer.allocUnsafe(5);\n  buf.copy(b, 0, i);\n  console.log(decoder.write(b));\n}\n")),(0,l.kt)("h2",{id:"stream\u57fa\u672c\u6982\u5ff5"},"Stream\u57fa\u672c\u6982\u5ff5"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6d41\u662f\u5bf9\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\u7684\u62bd\u8c61\uff0c\u662f\u4e00\u7ec4\u6709\u5e8f\u7684\u3001\u6709\u8d77\u70b9\u548c\u7ec8\u70b9\u7684\u5b57\u8282\u6570\u636e\u4f20\u8f93\u624b\u6bb5\u3002")),(0,l.kt)("p",null,"\u5728Node.js\u4e2d\u5b89\u88c5\u6d41\u52a8\u65b9\u5411\u53ef\u4ee5\u5206\u4e3a\u4e09\u79cd\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8bbe\u5907\u6d41\u5411\u7a0b\u5e8f\uff1areadable"),(0,l.kt)("li",{parentName:"ul"},"\u7a0b\u5e8f\u6d41\u5411\u8bbe\u5907\uff1awritable"),(0,l.kt)("li",{parentName:"ul"},"\u53cc\u5411\u6d41\u52a8\uff1aduplex\u3001transform")),(0,l.kt)("p",null,"pipe()\u8fde\u63a5\uff1a\u6d41\u7684\u52a0\u5de5\u5668\uff0c\u5982\u4e0b\u9762\u4f8b\u5b50\u6240\u793a\uff0c\u6d41\u7684\u65b9\u5411\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"rs ---\x3e lowercase"),"\uff1alowercase \u5728\u4e0b\u6e38\uff0c\u6240\u4ee5 lower \u9700\u8981\u662f\u4e2a writable \u6d41"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"lowercase ---\x3e ws"),"\uff1a\u76f8\u5bf9\u800c\u8a00\uff0clowercase \u53c8\u5728\u4e0a\u6e38\uff0c\u6240\u4ee5 lower \u9700\u8981\u662f\u4e2a readable \u6d41")),(0,l.kt)("p",null,"\u56e0\u6b64",(0,l.kt)("inlineCode",{parentName:"p"},"lowercase"),"\u5fc5\u987b\u662f\u53cc\u5411\u7684\u6d41\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nconst rs = fs.createReadStream('./test.txt');\nconst ws = fs.createWriteStream('./src/test.txt');\nrs.pipe(lowercase).pipe(ws);\n")),(0,l.kt)("h2",{id:"\u53ef\u8bfb\u6d41"},"\u53ef\u8bfb\u6d41"),(0,l.kt)("p",null,"\u53ef\u8bfb\u6d41\u662f",(0,l.kt)("strong",{parentName:"p"},"\u751f\u4ea7\u6570\u636e"),"\u7528\u6765\u4f9b\u7a0b\u5e8f\u6d88\u8d39\u7684\u6d41\u3002\u5e38\u89c1\u7684\u6570\u636e\u751f\u4ea7\u65b9\u5f0f\u6709\u8bfb\u53d6\u78c1\u76d8\u6587\u4ef6\u3001\u8bfb\u53d6\u7f51\u7edc\u8bf7\u6c42\u5185\u5bb9\u7b49\u3002"),(0,l.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u53ef\u8bfb\u6d41"},"\u81ea\u5b9a\u4e49\u53ef\u8bfb\u6d41"),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49\u53ef\u8bfb\u6d41\u9700\u8981\u4e24\u6b65\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7ee7\u627fStream\u6a21\u5757\u7684Readable\u7c7b"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"\u8986\u76d6\u91cd\u5199"),(0,l.kt)("inlineCode",{parentName:"li"},"_read()"),"\u65b9\u6cd5\uff0c\u8c03\u7528this.push\u5c06\u751f\u4ea7\u7684\u6570\u636e\u653e\u5165\u5f85\u8bfb\u53d6\u961f\u5217\u4e2d")),(0,l.kt)("p",null,"\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"_read()"),"\u65b9\u6cd5\u6709\u4e00\u4e2a\u53c2\u6570size\uff0c\u5728\u6682\u505c\u6a21\u5f0f\u4e0b\u6307\u5b9a\u5e94\u8bfb\u53d6\u591a\u5c11\u6570\u636e\u8fd4\u56de"),(0,l.kt)("li",{parentName:"ul"},"this.push\u7684\u5185\u5bb9\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216Buffer\uff0c\u4e0d\u80fd\u662f\u6570\u5b57"),(0,l.kt)("li",{parentName:"ul"},"this.push\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570encoding\u6307\u5b9a\u5b57\u7b26\u4e32\u7f16\u7801\u7c7b\u578b"),(0,l.kt)("li",{parentName:"ul"},"this.push(null)\u7528\u4e8e\u6807\u8bc6\u6570\u636e\u8bfb\u53d6\u5b8c\u6bd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const { Readable } = require('stream');\nclass RandomNumberStream extends Readable {\n  constructor(max) {\n    super();\n    this.max = max;\n  }\n  _read() {\n    setTimeout(() => {\n      if (this.max) {\n        const randomNumber = parseInt(Math.random() * 1000);\n        this.push(`${randomNumber}\\n`);\n        this.max = this.max - 1;\n      } else {\n        // \u5411\u7f13\u5b58\u533apush\u4e00\u4e2anull\u7528\u4e8e\u6682\u505c\u64cd\u4f5c\n        this.push(null);\n      }\n    }, 100)\n  }\n}\n\nconst rns = new RandomNumberStream(5);\n// \u4f7f\u7528pipe()\u662f\u6d41\u52a8\u6a21\u5f0f\nrns.pipe(process.stdout)\n")),(0,l.kt)("h3",{id:"\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f"},"\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5728\u4e0a\u9762\u4ee3\u7801\u4e2d\u7528\u4e86setTimeout\u800c\u4e0d\u662fsetInterval\uff0c\u4e3a\u5565\uff1f\u8fd9\u5c31\u8981\u5f15\u51fa\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f\u5462\uff0c\u4f7f\u7528\u4e86pipe()\u8bbe\u7f6e\u4e3a\u4e86\u6d41\u52a8\u6a21\u5f0f\uff0c\u56e0\u800c\u901a\u8fc7setTimeout\u4e5f\u80fd\u5b9e\u73b0\u91cd\u590d\u5b9a\u65f6\u6548\u679c\u3002"),(0,l.kt)("p",null,"\u4e24\u79cd\u6a21\u5f0f\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6d41\u52a8\u6a21\u5f0f\uff1a\u6570\u636e\u7531\u5e95\u5c42\u7cfb\u7edf\u8bfb\u51fa\uff0c\u5e76",(0,l.kt)("strong",{parentName:"li"},"\u5c3d\u53ef\u80fd\u5feb"),"\u5730\u63d0\u4f9b\u7ed9\u5e94\u7528\u7a0b\u5e8f"),(0,l.kt)("li",{parentName:"ol"},"\u6682\u505c\u6a21\u5f0f\uff1a\u5fc5\u987b\u663e\u793a\u5730",(0,l.kt)("strong",{parentName:"li"},"\u8c03\u7528 read() \u65b9\u6cd5"),"\u6765\u8bfb\u53d6\u82e5\u5e72\u6570\u636e\u5757\u3010\u6324\u7259\u818f\u5f0f\u8bfb\u6570\u636e\u3011")),(0,l.kt)("p",null,"\u4e24\u79cd\u6a21\u5f0f\u5f0f\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\u7684\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6682\u505c\u6a21\u5f0f---\x3e\u6d41\u52a8\u6a21\u5f0f",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u6dfb\u52a0 data \u4e8b\u4ef6\u76d1\u542c\u5668\u6765\u542f\u52a8\u6570\u636e\u76d1\u542c"),(0,l.kt)("li",{parentName:"ol"},"\u8c03\u7528 resume() \u65b9\u6cd5\u542f\u52a8\u6570\u636e\u6d41"),(0,l.kt)("li",{parentName:"ol"},"\u8c03\u7528 pipe() \u65b9\u6cd5\u5c06\u6570\u636e\u8f6c\u63a5\u5230\u53e6\u4e00\u4e2a\u53ef\u5199\u6d41"))),(0,l.kt)("li",{parentName:"ol"},"\u6d41\u52a8\u6a21\u5f0f---\x3e\u6682\u505c\u6a21\u5f0f",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\u5728\u6d41\u6ca1\u6709 pipe() \u65f6\uff0c\u8c03\u7528 pause() \u65b9\u6cd5\u53ef\u4ee5\u5c06\u6d41\u6682\u505c"),(0,l.kt)("li",{parentName:"ol"},"pipe() \u65f6\u79fb\u9664\u6240\u6709 data \u4e8b\u4ef6\u7684\u76d1\u542c\uff0c\u518d\u8c03\u7528 unpipe() \u65b9\u6cd5")))),(0,l.kt)("h4",{id:"\u6d41\u52a8\u6a21\u5f0f"},"\u6d41\u52a8\u6a21\u5f0f"),(0,l.kt)("p",null,"\u4e0a\u8ff0\u4f8b\u5b50\u901a\u8fc7pipe()\u5c31\u662f\u6d41\u52a8\u6a21\u5f0f\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u901a\u8fc7data\u4e8b\u4ef6\u65b9\u5f0f"),(0,l.kt)("p",null,"\u5f53\u53ef\u8bfb\u6d41\u751f\u4ea7\u51fa\u53ef\u4f9b\u6d88\u8d39\u7684\u6570\u636e\u540e\u5c31\u4f1a\u89e6\u53d1 data \u4e8b\u4ef6\uff0cdata \u4e8b\u4ef6\u76d1\u542c\u5668\u7ed1\u5b9a\u540e\uff0c\u6570\u636e\u4f1a\u88ab\u5c3d\u53ef\u80fd\u5730\u4f20\u9012\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const rns = new RandomNumberStream(5);\nrns.on('data', chunk => {\n  console.log(chunk);\n})\nrns.on('end', () => {\n  console.log('done');\n})\nrns.on('error', (err) => {\n  console.error(err);\n})\n")),(0,l.kt)("h4",{id:"\u6682\u505c\u6a21\u5f0f"},"\u6682\u505c\u6a21\u5f0f"),(0,l.kt)("p",null,"NodeJS \u63d0\u4f9b\u4e86\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"readable")," \u7684\u4e8b\u4ef6\uff0c\u4e8b\u4ef6\u5728\u53ef\u8bfb\u6d41\u51c6\u5907\u597d\u6570\u636e\u7684\u65f6\u5019\u89e6\u53d1\uff0c\u4e5f\u5c31\u662f\u5148\u76d1\u542c\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u6536\u5230\u901a\u77e5\u6709\u6570\u636e\u4e86\u518d\u53bb\u8bfb\u53d6\u5c31\u597d\u4e86\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/**\n * \u5f53read()\u51fd\u6570\u8fd4\u56de\u503c\u4e3anull\u65f6\u5019\u8868\u793a\u8bfb\u53d6\u5b8c\u6210\n * \u8bbe\u7f6esize\u4e3a2\uff0c\u8868\u793a\u6bcf\u6b21\u8bfb\u53d62\u4e2a\u5b57\u8282\n */\nrns.on('readable', () => {\n  let chunk;\n  while ((chunk = rns.read(2)) !== null) {\n    console.log(chunk);\n  }\n})\n")),(0,l.kt)("h2",{id:"\u53ef\u5199\u6d41"},"\u53ef\u5199\u6d41"),(0,l.kt)("p",null,"\u53ef\u5199\u6d41\u662f\u5bf9\u6570\u636e\u6d41\u5411\u8bbe\u5907\u7684\u62bd\u8c61\uff0c\u7528\u6765",(0,l.kt)("strong",{parentName:"p"},"\u6d88\u8d39\u4e0a\u6e38\u6d41\u8fc7\u6765\u7684\u6570\u636e"),"\uff0c\u901a\u8fc7\u53ef\u5199\u6d41\u7a0b\u5e8f\u53ef\u4ee5\u628a\u6570\u636e\u5199\u5165\u8bbe\u5907\uff0c\u5e38\u89c1\u7684\u662f\u672c\u5730\u78c1\u76d8\u6587\u4ef6\u6216\u8005 TCP\u3001HTTP \u7b49\u7f51\u7edc\u54cd\u5e94\u3002"),(0,l.kt)("h3",{id:"\u53ef\u5199\u6d41\u7684\u4f7f\u7528"},"\u53ef\u5199\u6d41\u7684\u4f7f\u7528"),(0,l.kt)("p",null,"\u4e4b\u524d\u63d0\u5230\u901a\u8fc7\u76d1\u542c\u53ef\u8bfb\u6d41\u7684data\u4e8b\u4ef6\u5c31\u80fd\u4f7f\u53ef\u8bfb\u6d41\u8fdb\u5165\u5230\u6d41\u52a8\u6a21\u5f0f\u4e2d\uff0c\u6211\u4eec\u5728\u56de\u8c03\u4e8b\u4ef6\u91cc\u8c03\u7528\u4e86\u53ef\u5199\u6d41\u7684 write() \u65b9\u6cd5\uff0c\u8fd9\u6837\u6570\u636e\u5c31\u88ab\u5199\u5165\u4e86\u53ef\u5199\u6d41\u62bd\u8c61\u7684\u8bbe\u5907\u4e2d\uff0c\u4e5f\u5c31\u662fcopy.txt\u6587\u4ef6\u3002"),(0,l.kt)("p",null,"wirte()\u6709\u4e09\u4e2a\u53c2\u6570\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"chunk\uff1a\u8868\u793a\u8981\u5199\u5165\u7684\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"encoding\uff1a\u5b57\u7b26\u7f16\u7801"),(0,l.kt)("li",{parentName:"ul"},"callback\uff1a\u6570\u636e\u88ab\u5199\u5165\u4e4b\u540e\u7684\u56de\u8c03\u51fd\u6570")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\nconst rs = fs.createReadStream('./src/test.txt');\nconst ws = fs.createWriteStream('./copy.txt');\n\nrs.setEncoding('utf-8');\nrs.on('data', chunk => {\n  ws.write(chunk);\n});\n")),(0,l.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u53ef\u5199\u6d41"},"\u81ea\u5b9a\u4e49\u53ef\u5199\u6d41"),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49\u53ef\u8bfb\u6d41\u548c\u53ef\u8bfb\u6d41\u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e24\u6b65\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7ee7\u627fstream\u6a21\u5757\u7684Writable\u7c7b"),(0,l.kt)("li",{parentName:"ol"},"\u5b9e\u73b0",(0,l.kt)("inlineCode",{parentName:"li"},"_write()"),"\u65b9\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const { Writable } = require('stream');\nclass OutputStream extends Writable {\n  _write(chunk, encoding, callback) {\n    process.stdout.write(chunk.toString().toUpperCase());\n    process.nextTick(callback);\n  }\n}\n")),(0,l.kt)("p",null,"\u5b9e\u4f8b\u5316\u53ef\u5199\u6d41\u6709\u51e0\u4e2aoptions\u53ef\u9009\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"objectMode\uff1a\u9ed8\u8ba4\u503cfalse\uff0c\u8bbe\u7f6e\u4e3atrue\u65f6",(0,l.kt)("inlineCode",{parentName:"li"},"writable.write()"),"\u65b9\u6cd5\u9664\u4e86string\u548cbuffer\u5916\uff0c\u8fd8\u53ef\u4ee5\u5199\u5165\u4efb\u610fJavaScript\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"highWaterMark\uff1a\u6bcf\u6b21\u6700\u591a\u5199\u5165\u7684\u6570\u636e\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3a16\uff0c\u537316kb"),(0,l.kt)("li",{parentName:"ul"},"decodeStrings\uff1a\u662f\u5426\u628a\u4f20\u5165\u7684\u6570\u636e\u8f6c\u6210Buffer\uff0c\u9ed8\u8ba4\u662ftrue")),(0,l.kt)("p",null,"\u65b9\u6cd5\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"write()"),"\uff1a\u5f53\u8981\u6c42\u5199\u5165\u7684\u6570\u636e\u5927\u4e8e\u53ef\u5199\u6d41\u7684 highWaterMark \u7684\u65f6\u5019\uff0c\u6570\u636e\u4e0d\u4f1a\u88ab\u4e00\u6b21\u5199\u5165\uff0c\u6709\u4e00\u90e8\u5206\u6570\u636e\u88ab\u6ede\u7559\u3002\u6570\u636e\u6709\u6ede\u7559\u7684\u8bdd\uff0c\u8fd4\u56de false\uff0c\u5982\u679c\u53ef\u4ee5\u5904\u7406\u5b8c\u5c31\u4f1a\u8fd4\u56de true\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"end()"),"\uff1a\u6ca1\u6709\u5176\u4ed6\u6570\u636e\u9700\u8981\u5199\u5165\uff0c\u53ef\u5199\u6d41\u53ef\u4ee5\u5173\u95ed\u4e86\u3002")),(0,l.kt)("p",null,"\u4e8b\u4ef6\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"pipe"),"\uff1a\u53ef\u8bfb\u6d41\u8c03\u7528pipe()\u65b9\u6cd5\u65f6\u5019\u89e6\u53d1"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"unpipe"),"\uff1a\u53ef\u8bfb\u6d41\u8c03\u7528unpipe()\u65b9\u6cd5\u65f6\u5019\u89e6\u53d1"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"drain"),"\uff1a\u5f53\u4e4b\u524d\u5b58\u5728\u6ede\u7559\u6570\u636e\uff0c\u4e5f\u5c31\u662f writeable.write() \u8fd4\u56de\u8fc7 false\uff0c\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684\u6d88\u5316\uff0c\u5904\u7406\u5b8c\u4e86\u79ef\u538b\u6570\u636e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5199\u5165\u65b0\u6570\u636e\u7684\u65f6\u5019\u89e6\u53d1\uff08drain \u7684\u672c\u610f\u5373\u4e3a\u6392\u6c34\u3001\u67af\u7aed\uff0c\u633a\u5f62\u8c61\u7684\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"finish"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"error"),"\uff1a\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"end()"),"\u65b9\u6cd5\u5e76\u4e14\u6240\u6709\u6570\u636e\u90fd\u88ab\u5199\u5165\u5e95\u5c42\u540e\u624d\u4f1a\u89e6\u53d1\u3002")),(0,l.kt)("h3",{id:"back-pressure"},"back pressure"),(0,l.kt)("p",null,"\u6d41\u4e0d\u662f\u4e00\u6b21\u6027\u628a\u6240\u6709\u6570\u636e\u8f7d\u5165\u5185\u5b58\u5904\u7406\uff0c\u800c\u662f\u4e00\u8fb9\u8bfb\u4e00\u8fb9\u5199\u3002\u4f46\u4e00\u822c\u8bfb\u53d6\u901f\u5ea6\u5feb\u4e8e\u5199\u5165\u901f\u5ea6\uff0c\u90a3\u4e48pipe()\u65b9\u6cd5\u662f\u5982\u4f55\u505a\u5230\u4f9b\u9700\u5e73\u8861\u7684\u5462\uff1f"),(0,l.kt)("p",null,"\u4e3b\u8981\u4f9d\u8d56\u4e0b\u9762\u4e09\u70b9\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u53ef\u8bfb\u6d41\u6709\u6d41\u52a8\u548c\u6682\u505c\u4e24\u79cd\u6a21\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"pause()")," \u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"resume()")," \u65b9\u6cd5\u5207\u6362"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u5199\u6d41\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"write()")," \u65b9\u6cd5\uff0c\u6bcf\u6b21\u53ef\u4ee5\u5904\u7406\u591a\u5c11\u662f highWatermark \u51b3\u5b9a\u7684"),(0,l.kt)("li",{parentName:"ol"},"\u5f53\u53ef\u5199\u6d41\u5904\u7406\u5b8c\u4e86\u79ef\u538b\u6570\u636e\u4f1a\u89e6\u53d1 drain \u4e8b\u4ef6")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const { Readable, Writable } = require('stream');\n// \u81ea\u5b9a\u4e49\u53ef\u8bfb\u6d41\nclass RandomNumberStream extends Readable {\n  constructor(max) {\n    super();\n    this.max = max;\n  }\n  _read() {\n    setTimeout(() => {\n      if (this.max) {\n        const randomNumber = parseInt(Math.random() * 1000);\n        this.push(`${randomNumber}\\n`);\n        this.max = this.max - 1;\n      } else {\n        // \u5411\u7f13\u5b58\u533apush\u4e00\u4e2anull\u7528\u4e8e\u6682\u505c\u64cd\u4f5c\n        this.push(null);\n      }\n    }, 1000)\n  }\n}\n// \u81ea\u5b9a\u4e49\u53ef\u5199\u6d41\nclass OutputStream extends Writable {\n  _write(chunk, encoding, callback) {\n    // \u5199\u5165\u6570\u636e\n    process.stdout.write(chunk);\n    process.nextTick(callback);\n  }\n}\nconst rns = new RandomNumberStream(10);\nconst os = new OutputStream({\n  objectMode: false,\n  highWaterMark: 8,\n  decodeStrings: true,\n});\n// data\u4e8b\u4ef6\u662f\u6d41\u52a8\u6a21\u5f0f\nrns.on('data', chunk => {\n  // \u5f53\u6709\u6570\u636e\u6ede\u7559\u65f6\uff0c\u8f6c\u6362\u6210\u6682\u505c\u6a21\u5f0f\n  if (os.write(chunk) === false) {\n    console.log('pause');\n    rns.pause();\n  }\n});\n// \u5982\u679c\u6709\u79ef\u538b\u7684\u6570\u636e\uff0c\u5c31\u89e6\u53d1drain\u4e8b\u4ef6\uff0c\u8f6c\u6362\u6210\u6d41\u52a8\u6a21\u5f0f\nos.on('drain', () => {\n  console.log('drain');\n  rns.resume();\n});\n")),(0,l.kt)("h2",{id:"\u53cc\u5de5\u6d41"},"\u53cc\u5de5\u6d41"),(0,l.kt)("p",null,"\u53cc\u6d41\u5c31\u662f\u540c\u65f6\u5b9e\u73b0 Readable \u548c Writable \u6d41\uff0c\u5728Node.js\u4e2d\u53cc\u5de5\u6d41\u5e38\u7528\u5982\u4e0b\u4e24\u79cd\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Duplex"),(0,l.kt)("li",{parentName:"ul"},"Transform")),(0,l.kt)("h3",{id:"duplex"},"Duplex"),(0,l.kt)("p",null,"\u548c\u53ef\u8bfb\u6d41\u3001\u53ef\u5199\u6d41\u7c7b\u4f3c\uff0c\u5b9e\u73b0\u53cc\u5de5\u6d41\u9700\u8981\u4e09\u6b65\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7ee7\u627f Duplex \u7c7b"),(0,l.kt)("li",{parentName:"ol"},"\u5b9e\u73b0 _read() \u65b9\u6cd5"),(0,l.kt)("li",{parentName:"ol"},"\u5b9e\u73b0 _write() \u65b9\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const { Duplex } = require('stream');\nclass MyDuplex extends Duplex {\n  constructor(options) {\n    super(options);\n  }\n  _write(chunk, encoding, callback) { }\n  _read(size) { }\n}\n")),(0,l.kt)("h3",{id:"transform"},"Transform"),(0,l.kt)("p",null,"\u548cDuplex\u5bf9\u6bd4\u4e24\u8005\u533a\u522b\uff1aDuplex \u867d\u7136\u540c\u65f6\u5177\u5907\u53ef\u8bfb\u6d41\u548c\u53ef\u5199\u6d41\uff0c\u4f46",(0,l.kt)("strong",{parentName:"p"},"\u4e24\u8005\u662f\u76f8\u5bf9\u72ec\u7acb\u7684"),"\uff1bTransform \u7684",(0,l.kt)("strong",{parentName:"p"},"\u53ef\u8bfb\u6d41\u7684\u6570\u636e\u4f1a\u7ecf\u8fc7\u4e00\u5b9a\u7684\u5904\u7406\u8fc7\u7a0b\u81ea\u52a8\u8fdb\u5165\u53ef\u5199\u6d41\u3002")),(0,l.kt)("p",null,"\u5b9e\u73b0Transform\u8f6c\u6362\u6d41\u9700\u8981\u4e09\u6b65\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7ee7\u627f Transform \u7c7b"),(0,l.kt)("li",{parentName:"ol"},"\u5b9e\u73b0 _transform() \u65b9\u6cd5"),(0,l.kt)("li",{parentName:"ol"},"\u5b9e\u73b0 _flush() \u65b9\u6cd5")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"_transform(chunk, encoding, callback)"),"\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u4e0d\u80fd\u76f4\u63a5\u8c03\u7528\uff0c\u5fc5\u987b\u5b50\u7c7b\u5b9e\u73b0\u3002"),"\u7528\u6765\u63a5\u6536\u6570\u636e\uff0c\u5e76\u4ea7\u751f\u8f93\u51fa\u3002\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"_transform()"),"\u65b9\u6cd5\u5185\u90e8\u53ef\u4ee5\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"this.push(data)"),"\u751f\u4ea7\u6570\u636e\uff0c\u4ea4\u7ed9\u53ef\u5199\u6d41\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u8c03\u7528\uff0c\u610f\u5473\u8fd9\u8f93\u5165\u4e0d\u4f1a\u4ea7\u751f\u8f93\u51fa\u3002"),(0,l.kt)("p",null,"\u5f53\u6570\u636e\u5904\u7406\u5b8c\u6210\u540e\u5fc5\u987b\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"callback(err, data)"),"\uff0cerr\u4f20\u9012\u9519\u8bef\u4fe1\u606f\uff0cdata\u4f20\u5165\u6548\u679c\u548c this.push(data) \u4e00\u6837\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"transform.prototype._transform = function (data, encoding, callback) {\n  this.push(data);\n  callback();\n};\ntransform.prototype._transform = function (data, encoding, callback) {\n  callback(null, data);\n};\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"_flush()"),"\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u4e0d\u80fd\u76f4\u63a5\u8c03\u7528\uff0c\u5fc5\u987b\u5b50\u7c7b\u5b9e\u73b0\u3002"),"\u5f53\u6ca1\u6709\u66f4\u591a\u7684\u5199\u5165\u6570\u636e\u88ab\u6d88\u8017\u65f6\uff0c\u4f46\u5728\u89e6\u53d1 ",(0,l.kt)("inlineCode",{parentName:"p"},"end"),"\u4e8b\u4ef6\u4ee5\u8868\u793a\u53ef\u8bfb\u6d41\u7ed3\u675f\u4e4b\u524d\uff0c\u5c06\u8c03\u7528\u6b64\u65b9\u6cd5\u3002"),(0,l.kt)("p",null,"Transform \u4e8b\u4ef6\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"finish"),"\uff1a\u5f53\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"transform.end()"),"\u5e76\u4e14\u6570\u636e\u88ab",(0,l.kt)("inlineCode",{parentName:"li"},"_transform()"),"\u5904\u7406\u5b8c\u540e\u4f1a\u89e6\u53d1finish"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"end"),"\uff1a\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"_flush()"),"\u540e\u6240\u6709\u6570\u636e\u8f93\u51fa\u5b8c\u6bd5\uff0c\u89e6\u53d1end\u4e8b\u4ef6")),(0,l.kt)("h1",{id:"\u4e94web\u5e94\u7528"},"\u4e94\u3001Web\u5e94\u7528"),(0,l.kt)("h2",{id:"http\u670d\u52a1\u5668"},"HTTP\u670d\u52a1\u5668"),(0,l.kt)("p",null,"1.\u57fa\u672c\u64cd\u4f5c"),(0,l.kt)("p",null,"\u521b\u5efaWeb Server\uff0c\u56de\u8c03\u4f20\u5165request\u548cresponse"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const http = require('http');\nconst server = http.createServer((req, res) => {\n  const { url, method, headers } = req;\n  res.setHeader('content-type', 'text/html');\n  res.write(`\u8bf7\u6c42 URL: ${url}\\n`);\n  res.write(`\u8bf7\u6c42\u65b9\u6cd5: ${method}\\n`);\n  res.write(`\u8bf7\u6c42 headers\uff1a${JSON.stringify(headers, null, '  ')}`);\n  res.end('\\n');\n});\nserver.listen(9527, () => {\n  console.log('Web Server started at port 9527');\n});\n")),(0,l.kt)("p",null,"2.\u8bfb\u53d6\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const http = require('http');\nconst path = require('path');\nconst fs = require('fs/promises');\n\nconst ROOT_DIRECTORY = './src';\nconst server = http.createServer((req, res) => {\n  const { url } = req;\n  const filePath = path.join(ROOT_DIRECTORY, url);\n  console.log(filePath);\n  fs.readFile(filePath).then(\n    chunk => {\n      res.writeHead(200, {\n        // \u8fd9\u91cc\u8bbe\u7f6e\u53ea\u80fd\u8fd4\u56dejs\u6587\u672c\u6587\u4ef6\uff0c\u60f3\u8981\u52a8\u6001\u7684\u4fee\u6539\uff0c\u53ef\u4ee5\u5f15\u5165mime\u6a21\u5757\n        'content-type': 'application/x-javascript;charset=utf-8',\n      })\n      res.end(chunk);\n    },\n    err => {\n      console.log(err);\n      res.writeHead(404, {\n        'content-type': 'text/html',\n      })\n      res.end('\u6587\u4ef6\u4e0d\u5b58\u5728');\n    }\n  )\n});\n\nserver.listen(9527, () => {\n  console.log('Web Server started at port 9527');\n})\n")),(0,l.kt)("p",null,"3.\u8bfb\u53d6\u7535\u5f71\u6587\u4ef6"),(0,l.kt)("p",null,"\u7406\u8bba\u4e0a\u8bfb\u53d6\u7535\u5f71\u6587\u4ef6\u53ef\u4ee5\u4f7f\u7528\u548c\u4e0a\u9762\u4e00\u6837\u7684\u4ee3\u7801\uff0c\u4f46\u5b9e\u9645\u6267\u884c\u4f1a\u53d1\u73b0\u7535\u5f71\u6587\u4ef6\u5728\u5b8c\u5168\u8bfb\u53d6\u5230\u5185\u5b58\u540e\u624d\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\uff0c\u8fd9\u6837\u8fd4\u56de\u5185\u5bb9\u8017\u65f6\u6781\u957f\uff0c\u800c\u4e14\u7535\u5f71\u6587\u4ef6\u8fc7\u5927\u7684\u8bdd\u7a0b\u5e8f\u4e5f\u6ca1\u6709\u529e\u6cd5\u5904\u7406\uff0c",(0,l.kt)("strong",{parentName:"p"},"HTTP \u534f\u8bae\u662f\u652f\u6301\u5206\u6bb5\u4f20\u8f93\u7684"),"\uff0c\u65e2\u7136 res \u662f\u53ef\u5199\u6d41\uff0c\u53ef\u4ee5\u7b80\u5355",(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528 stream \u6765\u505a\u5230\u8fb9\u8bfb\u53d6\u5185\u5bb9\u8fb9\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668"),"\uff0c\u800c\u4e0d\u662f\u4e00\u6b21\u8bfb\u53d6\u5b8c\u6210\u540e\u8fd4\u56de\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const http = require('http');\nconst path = require('path');\nconst fs = require('fs');\nconst mime = require('mime-types');\n\n// \u9759\u6001\u8d44\u6e90\u6839\u76ee\u5f55\nconst ROOT_DIRECTORY = '/Users/undefined/node-demo/public';\n\nconst server = http.createServer((req, res) => {\n  const { url } = req;\n\n  const filePath = path.join(ROOT_DIRECTORY, url);\n\n  fs.access(filePath, fs.constants.R_OK, err => {\n    if (err) {\n      res.writeHead(404, {\n        'content-type': 'text/html',\n      });\n      res.end('\u6587\u4ef6\u4e0d\u5b58\u5728\uff01');\n\n    } else {\n      res.writeHead(200, {\n        'content-type': mime.contentType(path.extname(url)),\n      });\n      fs.createReadStream(filePath).pipe(res);\n    }\n  });\n});\n\nserver.listen(9527, () => {\n  console.log('Web Server started at port 9527');\n});\n")),(0,l.kt)("h2",{id:"\u4f7f\u7528\u4e2d\u95f4\u4ef6\u7684\u601d\u8def\u5199\u4e00\u4e2a\u9759\u6001\u670d\u52a1\u5668"},"\u4f7f\u7528\u4e2d\u95f4\u4ef6\u7684\u601d\u8def\u5199\u4e00\u4e2a\u9759\u6001\u670d\u52a1\u5668"))}u.isMDXComponent=!0},1315:(e,n,t)=>{t.d(n,{Z:()=>a});const a="data:image/png;base64,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"}}]);